
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="技术博客">
      
      
        <meta name="author" content="weiya">
      
      
        <link rel="canonical" href="https://tech.hohoweiya.xyz/Linux/rocky-server/">
      
      
        <link rel="prev" href="../ecs/">
      
      
        <link rel="next" href="../asAserver/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.1">
    
    
      
        <title>Rocky-Linux - techNotes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.72749a73.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    

  

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1JWL5Y1W90"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1JWL5Y1W90');
  </script>
  <script data-ad-client="ca-pub-3680148472128768" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rocky-linux" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="techNotes" class="md-header__button md-logo" aria-label="techNotes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            techNotes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rocky-Linux
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/szcf-weiya/techNotes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    szcf-weiya/techNotes
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Linux

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../comparisons/stat/" class="md-tabs__link">
          
  
  StatProgramming

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Cpp/" class="md-tabs__link">
          
  
  CSProgramming

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../TeX/" class="md-tabs__link">
          
  
  DocProgramming

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Internet/sci-int/" class="md-tabs__link">
          
  
  Network/Internet

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../autotools/" class="md-tabs__link">
          
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../stats/prob/" class="md-tabs__link">
          
  
  Stat

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../biology/samtools/" class="md-tabs__link">
          
  
  InvitedPosts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../English/" class="md-tabs__link">
          
  
  Misc

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="techNotes" class="md-nav__button md-logo" aria-label="techNotes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    techNotes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/szcf-weiya/techNotes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    szcf-weiya/techNotes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Laptops
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Laptops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ubuntu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ubuntu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Software
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command-line Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shell Scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../wsl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WSL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_6" >
        
          <label class="md-nav__link" for="__nav_2_2_6" id="__nav_2_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_6">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2020-08-25-PSSD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Portable SSD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2020-09-01-charge-battery-adaptively/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Charge Battery Adaptively
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2021-06-07-switch-monitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Switch Monitor Mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2021-07-28-use-old-kernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use Old Kernel
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Servers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Servers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../servers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ecs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AliECS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Rocky-Linux
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Rocky-Linux
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#automatic-backup-rsnapshot" class="md-nav__link">
    Automatic Backup: rsnapshot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-slurm" class="md-nav__link">
    Install Slurm
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cgroup" class="md-nav__link">
    CGroup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecttypeparameters" class="md-nav__link">
    SelectTypeParameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privatedata" class="md-nav__link">
    PrivateData
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagnose-network-speed" class="md-nav__link">
    Diagnose Network Speed
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../asAserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    G40
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CHPC-Cluster
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            CHPC-Cluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../chpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" >
        
          <label class="md-nav__link" for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2020-12-17-passwordless-failed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fail to SSH passwordlessly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2021-05-12-fail-to-access-home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fail to Access Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2022-11-19-why-job-restart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why Job Restart?
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    StatProgramming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            StatProgramming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../comparisons/stat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comparisons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    R
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            R
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../R/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../R/plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
        
          <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_3">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../R/legend_from_zhihu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ggplot2 中的 legend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../R/sample/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    new sample function (v3.6.0+)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../R/factor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    一道与 factor 有关的问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python/conda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conda
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python/opencv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenCV
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python/rpy2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rpy2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_5" >
        
          <label class="md-nav__link" for="__nav_3_3_5" id="__nav_3_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_5">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python/pystan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyStan 体验
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../python/esltag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    自建关键词索引页
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Julia
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Julia
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../julia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../julia/plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../julia/dev_package/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dev
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Matlab
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Matlab
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Matlab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../SAS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SAS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CSProgramming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            CSProgramming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C/C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            C/C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Cpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Cpp/Qt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Qt
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            SQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../R/install-notes-for-rmysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RMySQL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cuda
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DocProgramming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            DocProgramming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    TeX
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            TeX
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/CI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TravisCI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/arxiv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    arXiv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/vargreek/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VarGreek
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/overleaf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overleaf
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Markdown
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Markdown
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    StaticPages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            StaticPages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../website/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Website
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../website/disqus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disqus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../website/css/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../website/analytics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analytics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DynamicPages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            DynamicPages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../PHP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../website/xampp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    XAMPP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Network/Internet
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Network/Internet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/sci-int/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    科学上网
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    一般问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/ipv6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IPv6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/encrypt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    加密算法
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../autotools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autotools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../phantomjs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Phantomjs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Stat
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Stat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../stats/prob/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Probability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Statistics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../scientific/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scientific
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../stats/matrix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matrix
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    InvitedPosts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            InvitedPosts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/samtools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Samtools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../maximum-usage-of-ITSC-cluster-resource/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MaxClusterUsage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Misc
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../English/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    English
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../guitar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guitar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../win/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Biology
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../finance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Finance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../fresh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fresh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Links
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/live/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Live
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/wx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    小程序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/wxjssdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jssdk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    讲座
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/terms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terminology
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#automatic-backup-rsnapshot" class="md-nav__link">
    Automatic Backup: rsnapshot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-slurm" class="md-nav__link">
    Install Slurm
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cgroup" class="md-nav__link">
    CGroup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecttypeparameters" class="md-nav__link">
    SelectTypeParameters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privatedata" class="md-nav__link">
    PrivateData
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagnose-network-speed" class="md-nav__link">
    Diagnose Network Speed
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/szcf-weiya/techNotes/edit/master/docs/Linux/rocky-server.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="rocky-linux">Rocky Linux<a class="headerlink" href="#rocky-linux" title="Permanent link">&para;</a></h1>
<p>Rocky Linux refers to the new server in Fan&rsquo;s Group</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lsb_release<span class="w"> </span>-a
LSB<span class="w"> </span>Version:<span class="w">    </span>:core-4.1-amd64:core-4.1-noarch
Distributor<span class="w"> </span>ID:<span class="w"> </span>Rocky
Description:<span class="w">    </span>Rocky<span class="w"> </span>Linux<span class="w"> </span>release<span class="w"> </span><span class="m">8</span>.4<span class="w"> </span><span class="o">(</span>Green<span class="w"> </span>Obsidian<span class="o">)</span>
Release:<span class="w">    </span><span class="m">8</span>.4
Codename:<span class="w">   </span>GreenObsidian
</code></pre></div>
<p>where the distribution name <code>Rocky Linux</code> is new to me, although I might heard it before.</p>
<blockquote>
<p><a href="https://github.com/rocky-linux/rocky">Rocky Linux</a> is a community enterprise Operating System designed to be 100% bug-for-bug compatible with Enterprise Linux, now that CentOS has shifted direction.</p>
</blockquote>
<p>Here is a Chinese discussion, <a href="https://www.zhihu.com/question/434205770">如何看待CentOS 创始人新发起的Rocky Linux项目?</a></p>
<h2 id="automatic-backup-rsnapshot">Automatic Backup: rsnapshot<a class="headerlink" href="#automatic-backup-rsnapshot" title="Permanent link">&para;</a></h2>
<p>Follow the tutorial <a href="https://www.cs.cornell.edu/~edward/backups.html">Automatic Backups on Ubuntu</a></p>
<ol>
<li>install <code>yum install rsnapshot</code></li>
<li>configure <code>/etc/rsnapshot.conf</code>, see the reference for more details</li>
<li>schedule backup via <code>cron</code> and <code>anacron</code></li>
</ol>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>cat<span class="w"> </span>/etc/anacrontab<span class="w"> </span>
<span class="gp">#</span>period<span class="w"> </span><span class="k">in</span><span class="w"> </span>days<span class="w">   </span>delay<span class="w"> </span><span class="k">in</span><span class="w"> </span>minutes<span class="w">   </span>job-identifier<span class="w">   </span><span class="nb">command</span>
<span class="go">...</span>
<span class="go">1   10  daily-snapshot  /usr/bin/rsnapshot daily</span>
<span class="go">7   20  weekly-snapshot /usr/bin/rsnapshot weekly</span>

<span class="gp"># </span>cat<span class="w"> </span>/etc/cron.d/rsnapshot<span class="w"> </span>
<span class="go">0 */4 * * * root /usr/bin/rsnapshot hourly</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><code>cron</code> and <code>anacron</code> are two different utilities that can automatically run a program at scheduled times.
- <code>cron</code> is older, and it will not run any scheduled task whose scheduled time occurs while the computer is powered off.
- <code>anacron</code> will re-run the missed task the next time the computer turns on.    </p>
</div>
<h2 id="install-slurm">Install Slurm<a class="headerlink" href="#install-slurm" title="Permanent link">&para;</a></h2>
<p>Different from CHPC&rsquo;s cluster, the group server is just one node. So first of all, I search the possibility and necessity of slurm on single node, here are some references.</p>
<ul>
<li><a href="http://docs.nanomatch.de/technical/SimStackRequirements/SingleNodeSlurm.html#slurm-single-node-install">SLURM single node install</a></li>
<li><a href="https://rolk.github.io/2015/04/20/slurm-cluster">Setting up a single server SLURM cluster</a></li>
</ul>
<p>Comparing with the standard installation, it seems no much difference, so I follow the official <a href="https://slurm.schedmd.com/quickstart_admin.html">Quick Start Administrator Guide</a> to install.</p>
<ul>
<li>install munge: the first attempt is not enough, and its <code>devel</code> will be also installed</li>
</ul>
<div class="highlight"><pre><span></span><code>yum<span class="w"> </span>install<span class="w"> </span>munge
</code></pre></div>
<ul>
<li>download source package</li>
</ul>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://download.schedmd.com/slurm/slurm-20.11.7.tar.bz2
</code></pre></div>
<ul>
<li>build it</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>rpmbuild<span class="w"> </span>-ta<span class="w"> </span>slurm*.tar.bz2
</code></pre></div>
<p>but it throws that</p>
<div class="highlight"><pre><span></span><code>error:<span class="w"> </span>Failed<span class="w"> </span>build<span class="w"> </span>dependencies:
<span class="w">    </span>munge-devel<span class="w"> </span>is<span class="w"> </span>needed<span class="w"> </span>by<span class="w"> </span>slurm-20.11.7-1.el8.x86_64
<span class="w">    </span>pam-devel<span class="w"> </span>is<span class="w"> </span>needed<span class="w"> </span>by<span class="w"> </span>slurm-20.11.7-1.el8.x86_64
<span class="w">    </span>perl<span class="o">(</span>ExtUtils::MakeMaker<span class="o">)</span><span class="w"> </span>is<span class="w"> </span>needed<span class="w"> </span>by<span class="w"> </span>slurm-20.11.7-1.el8.x86_64
<span class="w">    </span>readline-devel<span class="w"> </span>is<span class="w"> </span>needed<span class="w"> </span>by<span class="w"> </span>slurm-20.11.7-1.el8.x86_64
</code></pre></div>
<p>so I need to resolve these dependencies firstly.</p>
<ul>
<li>install <code>munge-devel</code></li>
</ul>
<p>firstly I tried </p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>yum<span class="w"> </span>install<span class="w"> </span>munge-devel
<span class="go">Last metadata expiration check: 1:10:07 ago on Sat 26 Jun 2021 06:42:42 PM HKT.</span>
<span class="go">No match for argument: munge-devel</span>
<span class="go">Error: Unable to find a match: munge-devel</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">use console for root&rsquo;s <code>#</code></p>
<p>In bash code block, the symbol <code>#</code> would be treated as comments, but I want to indicate the operations are performed by root, so change <code>bash</code> to <code>console</code> refer to <a href="https://groups.google.com/g/nikola-discuss/c/5AzGQjlhB8g">Markdown syntax for interactive shell commands</a></p>
</div>
<p>Reminded by <a href="https://forums.rockylinux.org/t/slurm-does-not-install-from-the-epel-repo/2832">Slurm does not install from the epel repo</a>, I tried to enable the <code>powertools</code> repo following the instruction, <a href="https://serverfault.com/questions/997896/how-to-enable-powertools-repository-in-centos-8">How to enable PowerTools repository in CentOS 8?</a></p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>yum<span class="w"> </span>repolist<span class="w"> </span>
<span class="go">repo id                                                                repo name</span>
<span class="go">appstream                                                              Rocky Linux 8 - AppStream</span>
<span class="go">baseos                                                                 Rocky Linux 8 - BaseOS</span>
<span class="go">epel                                                                   Extra Packages for Enterprise Linux 8 - x86_64</span>
<span class="go">epel-modular                                                           Extra Packages for Enterprise Linux Modular 8 - x86_64</span>
<span class="go">extras                                                                 Rocky Linux 8 - Extras</span>

<span class="gp"># </span>yum<span class="w"> </span>install<span class="w"> </span>dnf-plugins-core
<span class="go">Last metadata expiration check: 1:15:02 ago on Sat 26 Jun 2021 06:42:42 PM HKT.</span>
<span class="go">Package dnf-plugins-core-4.0.18-4.el8.noarch is already installed.</span>
<span class="go">Dependencies resolved.</span>
<span class="go">Nothing to do.</span>
<span class="go">Complete!</span>

<span class="gp"># </span>yum<span class="w"> </span>config-manager<span class="w"> </span>--set-enabled<span class="w"> </span>powertools
<span class="gp"># </span>yum<span class="w"> </span>repolist<span class="w"> </span>
<span class="go">repo id                                                                repo name</span>
<span class="go">appstream                                                              Rocky Linux 8 - AppStream</span>
<span class="go">baseos                                                                 Rocky Linux 8 - BaseOS</span>
<span class="go">epel                                                                   Extra Packages for Enterprise Linux 8 - x86_64</span>
<span class="go">epel-modular                                                           Extra Packages for Enterprise Linux Modular 8 - x86_64</span>
<span class="go">extras                                                                 Rocky Linux 8 - Extras</span>
<span class="go">powertools                                                             Rocky Linux 8 - PowerTools</span>
</code></pre></div>
<p>then I can install <code>munge-devel</code>,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>yum<span class="w"> </span>install<span class="w"> </span>munge-devel
<span class="go">Rocky Linux 8 - PowerTools                                                                                                                              2.6 MB/s | 2.1 MB     00:00    </span>
<span class="go">Dependencies resolved.</span>
<span class="go">========================================================================================================================================================================================</span>
<span class="go"> Package                                      Architecture                            Version                                         Repository                                   Size</span>
<span class="go">========================================================================================================================================================================================</span>
<span class="go">Installing:</span>
<span class="go"> munge-devel                                  x86_64                                  0.5.13-2.el8                                    powertools                                   27 k</span>

<span class="go">Transaction Summary</span>
<span class="go">========================================================================================================================================================================================</span>
<span class="go">Install  1 Package</span>

<span class="go">Total download size: 27 k</span>
<span class="go">Installed size: 23 k</span>
<span class="go">Is this ok [y/N]: y</span>
<span class="go">Downloading Packages:</span>
<span class="go">munge-devel-0.5.13-2.el8.x86_64.rpm                                                                                                                     716 kB/s |  27 kB     00:00    </span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">Total                                                                                                                                                    95 kB/s |  27 kB     00:00     </span>
<span class="go">Running transaction check</span>
<span class="go">Transaction check succeeded.</span>
<span class="go">Running transaction test</span>
<span class="go">Transaction test succeeded.</span>
<span class="go">Running transaction</span>
<span class="go">  Preparing        :                                                                                                                                                                1/1 </span>
<span class="go">  Installing       : munge-devel-0.5.13-2.el8.x86_64                                                                                                                                1/1 </span>
<span class="go">  Running scriptlet: munge-devel-0.5.13-2.el8.x86_64                                                                                                                                1/1 </span>
<span class="go">  Verifying        : munge-devel-0.5.13-2.el8.x86_64                                                                                                                                1/1 </span>
<span class="go">Installed products updated.</span>

<span class="go">Installed:</span>
<span class="go">  munge-devel-0.5.13-2.el8.x86_64                                                                                                                                                       </span>

<span class="go">Complete!</span>
</code></pre></div>
<ul>
<li>install other dependencies,</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>yum<span class="w"> </span>install<span class="w"> </span>pam-devel
<span class="gp"># </span>yum<span class="w"> </span>install<span class="w"> </span>readline-devel
<span class="gp"># </span>yum<span class="w"> </span>install<span class="w"> </span>perl-ExtUtils-MakeMaker.noarch
</code></pre></div>
<p>where the package name for the last one is determining by simply googling <code>perl(ExtUtils::MakeMaker)</code></p>
<ul>
<li>build again</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>rpmbuild<span class="w"> </span>-ta<span class="w"> </span>slurm-20.11.7.tar.bz2
<span class="go">Processing files: slurm-slurmdbd-20.11.7-1.el8.x86_64</span>
<span class="go">error: File not found: /root/rpmbuild/BUILDROOT/slurm-20.11.7-1.el8.x86_64/usr/lib64/slurm/accounting_storage_mysql.so</span>


<span class="go">RPM build errors:</span>
<span class="go">    Macro expanded in comment on line 22: %_prefix path     install path for commands, libraries, etc.</span>

<span class="go">    Macro expanded in comment on line 170: %define _unpackaged_files_terminate_build      0</span>

<span class="go">    Empty %files file /root/rpmbuild/BUILD/slurm-20.11.7/slurm.files</span>
<span class="go">    File not found: /root/rpmbuild/BUILDROOT/slurm-20.11.7-1.el8.x86_64/usr/lib64/slurm/accounting_storage_mysql.so</span>
<span class="go">    File listed twice: /usr/lib/.build-id/13/1f6904421dbe39c72395ad1902cee51db6a0ec</span>
<span class="go">    File listed twice: /usr/lib/.build-id/28/be902644d9888579406edd90f00c5f9c9c2aa6</span>
<span class="go">    File listed twice: /usr/lib/.build-id/7c/791fea05f7db7b3de616553cd27fa82b3fc510</span>
<span class="go">    File listed twice: /usr/lib/.build-id/93/bbb15fe8897a7d4745fc56dcb3e5435f80bf4c</span>
<span class="go">    Deprecated external dependency generator is used!</span>
<span class="go">    Deprecated external dependency generator is used!</span>
<span class="go">    Deprecated external dependency generator is used!</span>
<span class="go">    Empty %files file /root/rpmbuild/BUILD/slurm-20.11.7/example.configs</span>
<span class="go">    Deprecated external dependency generator is used!</span>
<span class="go">    Deprecated external dependency generator is used!</span>
<span class="go">    Deprecated external dependency generator is used!</span>
<span class="go">    File not found: /root/rpmbuild/BUILDROOT/slurm-20.11.7-1.el8.x86_64/usr/lib64/slurm/accounting_storage_mysql.so</span>
</code></pre></div>
<p>which means that <code>mysql</code> is needed. </p>
<ul>
<li>install <code>mariadb</code> and its <code>devel</code> following <a href="https://www.slothparadise.com/how-to-install-slurm-on-centos-7-cluster/">How to Install Slurm on CentOS 7 Cluster</a></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># yum install mariadb-server mariadb-devel</span>
</code></pre></div>
<ul>
<li>build again</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># rpmbuild -ta slurm-20.11.7.tar.bz2</span>
Wrote:<span class="w"> </span>/root/rpmbuild/RPMS/x86_64/slurm-openlava-20.11.7-1.el8.x86_64.rpm
Wrote:<span class="w"> </span>/root/rpmbuild/RPMS/x86_64/slurm-contribs-20.11.7-1.el8.x86_64.rpm
Wrote:<span class="w"> </span>/root/rpmbuild/RPMS/x86_64/slurm-pam_slurm-20.11.7-1.el8.x86_64.rpm
Executing<span class="o">(</span>%clean<span class="o">)</span>:<span class="w"> </span>/bin/sh<span class="w"> </span>-e<span class="w"> </span>/var/tmp/rpm-tmp.52rp8H
+<span class="w"> </span><span class="nb">umask</span><span class="w"> </span><span class="m">022</span>
+<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/root/rpmbuild/BUILD
+<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>slurm-20.11.7
+<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/root/rpmbuild/BUILDROOT/slurm-20.11.7-1.el8.x86_64
</code></pre></div>
<p>it succeeds!</p>
<ul>
<li>install rpms</li>
</ul>
<p>all built rpms are</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ls rpmbuild/RPMS/x86_64/</span>
slurm-20.11.7-1.el8.x86_64.rpm<span class="w">                  </span>slurm-libpmi-20.11.7-1.el8.x86_64.rpm<span class="w">     </span>slurm-slurmctld-20.11.7-1.el8.x86_64.rpm
slurm-contribs-20.11.7-1.el8.x86_64.rpm<span class="w">         </span>slurm-openlava-20.11.7-1.el8.x86_64.rpm<span class="w">   </span>slurm-slurmd-20.11.7-1.el8.x86_64.rpm
slurm-devel-20.11.7-1.el8.x86_64.rpm<span class="w">            </span>slurm-pam_slurm-20.11.7-1.el8.x86_64.rpm<span class="w">  </span>slurm-slurmdbd-20.11.7-1.el8.x86_64.rpm
slurm-example-configs-20.11.7-1.el8.x86_64.rpm<span class="w">  </span>slurm-perlapi-20.11.7-1.el8.x86_64.rpm<span class="w">    </span>slurm-torque-20.11.7-1.el8.x86_64.rpm

<span class="c1"># yum --nogpgcheck localinstall slurm-20.11.7-1.el8.x86_64.rpm slurm-devel-20.11.7-1.el8.x86_64.rpm slurm-perlapi-20.11.7-1.el8.x86_64.rpm slurm-torque-20.11.7-1.el8.x86_64.rpm slurm-slurmctld-20.11.7-1.el8.x86_64.rpm slurm-slurmd-20.11.7-1.el8.x86_64.rpm</span>
</code></pre></div>
<ul>
<li>then configure from <a href="https://slurm.schedmd.com/configurator.easy.html">https://slurm.schedmd.com/configurator.easy.html</a></li>
</ul>
<p>change the hostname to <code>hostname -s</code></p>
<ul>
<li>be careful about the path to the logfile,</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir /var/spool/slurmctld
chown slurm: /var/spool/slurmctld
chmod 755 /var/spool/slurmctld
touch /var/log/slurmctld.log
chown slurm: /var/log/slurmctld.log
touch /var/log/slurm_jobacct.log /var/log/slurm_jobcomp.log
chown slurm: /var/log/slurm_jobacct.log /var/log/slurm_jobcomp.log
</code></pre></div>
<p>also</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>/var/spool/slurmd
chown<span class="w"> </span>slurm:<span class="w"> </span>/var/spool/slurmd
chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>/var/spool/slurmd
touch<span class="w"> </span>/var/log/slurmd.log
chown<span class="w"> </span>slurm:<span class="w"> </span>/var/log/slurmd.log
</code></pre></div>
<p>then check </p>
<div class="highlight"><pre><span></span><code><span class="c1"># slurmd -C</span>
<span class="nv">NodeName</span><span class="o">=</span>stapcXXX<span class="w"> </span><span class="nv">CPUs</span><span class="o">=</span><span class="m">96</span><span class="w"> </span><span class="nv">Boards</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">SocketsPerBoard</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">CoresPerSocket</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="nv">ThreadsPerCore</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">RealMemory</span><span class="o">=</span><span class="m">385333</span>
<span class="nv">UpTime</span><span class="o">=</span><span class="m">1</span>-04:02:46
</code></pre></div>
<ul>
<li>check if <code>sinfo</code> OK,</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>sinfo<span class="w"> </span>
<span class="go">slurm_load_partitions: Unable to contact slurm controller (connect failure)</span>
<span class="gp"># </span>scontrol<span class="w"> </span>show<span class="w"> </span>nodes
<span class="go">slurm_load_node error: Unable to contact slurm controller (connect failure)</span>
</code></pre></div>
<p>and the service <code>slurmd</code> and <code>slurmctld</code> fails to start,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>systemctl<span class="w"> </span>status<span class="w"> </span>slurmd.service
<span class="go">● slurmd.service - Slurm node daemon</span>
<span class="go">   Loaded: loaded (/usr/lib/systemd/system/slurmd.service; enabled; vendor preset: disabled)</span>
<span class="go">   Active: failed (Result: exit-code) since Sat 2021-06-26 20:51:09 HKT; 4s ago</span>
<span class="go">  Process: 126781 ExecStart=/usr/sbin/slurmd -D $SLURMD_OPTIONS (code=exited, status=1/FAILURE)</span>
<span class="go"> Main PID: 126781 (code=exited, status=1/FAILURE)</span>

<span class="go">Jun 26 20:51:09 stapcXXX.sta.cuhk.edu.hk systemd[1]: Started Slurm node daemon.</span>
<span class="go">Jun 26 20:51:09 stapcXXX.sta.cuhk.edu.hk systemd[1]: slurmd.service: Main process exited, code=exited, status=1/FAILURE</span>
<span class="go">Jun 26 20:51:09 stapcXXX.sta.cuhk.edu.hk systemd[1]: slurmd.service: Failed with result &#39;exit-code&#39;.</span>

<span class="gp"># </span>systemctl<span class="w"> </span>status<span class="w"> </span>slurmctld.service
<span class="go">● slurmctld.service - Slurm controller daemon</span>
<span class="go">   Loaded: loaded (/usr/lib/systemd/system/slurmctld.service; enabled; vendor preset: disabled)</span>
<span class="go">   Active: failed (Result: exit-code) since Sat 2021-06-26 20:52:26 HKT; 4s ago</span>
<span class="go">  Process: 126814 ExecStart=/usr/sbin/slurmctld -D $SLURMCTLD_OPTIONS (code=exited, status=1/FAILURE)</span>
<span class="go"> Main PID: 126814 (code=exited, status=1/FAILURE)</span>

<span class="go">Jun 26 20:52:26 stapcXXX.sta.cuhk.edu.hk systemd[1]: Started Slurm controller daemon.</span>
<span class="go">Jun 26 20:52:26 stapcXXX.sta.cuhk.edu.hk systemd[1]: slurmctld.service: Main process exited, code=exited, status=1/FAILURE</span>
<span class="go">Jun 26 20:52:26 stapcXXX.sta.cuhk.edu.hk systemd[1]: slurmctld.service: Failed with result &#39;exit-code&#39;.</span>
</code></pre></div>
<p>the error turns to be the incosistent path in the config file, <code>slurm.conf</code></p>
<div class="highlight"><pre><span></span><code>StateSaveLocation:<span class="w"> </span>/var/spool/slurmctld
</code></pre></div>
<p>and then</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>/var/spool/slurmctld
chown<span class="w"> </span>slurm:<span class="w"> </span>/var/spool/slurmctld
</code></pre></div>
<p>but the default path is <code>/var/spool</code>. </p>
<ul>
<li>run <code>slurmctld</code> service</li>
</ul>
<p>After correcting the path, the service begins to work,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>systemctl<span class="w"> </span>status<span class="w"> </span>slurmctld.service<span class="w"> </span>
<span class="go">● slurmctld.service - Slurm controller daemon</span>
<span class="go">   Loaded: loaded (/usr/lib/systemd/system/slurmctld.service; enabled; vendor preset: disabled)</span>
<span class="go">   Active: active (running) since Sat 2021-06-26 22:11:14 HKT; 2min 18s ago</span>
<span class="go"> Main PID: 128214 (slurmctld)</span>
<span class="go">    Tasks: 7</span>
<span class="go">   Memory: 4.4M</span>
<span class="go">   CGroup: /system.slice/slurmctld.service</span>
<span class="go">           └─128214 /usr/sbin/slurmctld -D</span>

<span class="go">Jun 26 22:11:14 stapcXXX.sta.cuhk.edu.hk systemd[1]: Started Slurm controller daemon.</span>
</code></pre></div>
<ul>
<li>run <code>slurmd</code> service</li>
</ul>
<p>However, <code>slurmd</code> still failed, but no informative message returned by the <code>systemctl</code> command. Try to directly run the command</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>slurmd<span class="w"> </span>-D
<span class="go">slurmd: error: Node configuration differs from hardware: CPUs=1:96(hw) Boards=1:1(hw) SocketsPerBoard=1:2(hw) CoresPerSocket=1:24(hw) ThreadsPerCore=1:2(hw)</span>
<span class="go">slurmd: error: cgroup namespace &#39;freezer&#39; not mounted. aborting</span>
<span class="go">slurmd: error: unable to create freezer cgroup namespace</span>
<span class="go">slurmd: error: Couldn&#39;t load specified plugin name for proctrack/cgroup: Plugin init() callback failed</span>
<span class="go">slurmd: error: cannot create proctrack context for proctrack/cgroup</span>
<span class="go">slurmd: error: slurmd initialization failed</span>
</code></pre></div>
<p>then correct the corresponding configuration. And temporarly disable cgroup by setting</p>
<div class="highlight"><pre><span></span><code>Process<span class="w"> </span>Tracking:<span class="w"> </span>LinuxProc
</code></pre></div>
<p>as suggested in <a href="http://docs.nanomatch.de/technical/SimStackRequirements/SingleNodeSlurm.html">SLURM single node install</a></p>
<p>Also pay attention to <code>restart</code>, or <code>stop + start</code> the service, sometimes the configuration file might still be outdated. For example, I had set the hostname as <code>hostname -f</code> and <code>hostname -s</code>, but sometimes the hostname has not been updated after changing the hostname, so make sure the updated configuration file has been taken effects.</p>
<p>After necessary correction and restart,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>slurmd<span class="w"> </span>-D
<span class="go">slurmd: slurmd version 20.11.7 started</span>
<span class="go">slurmd: slurmd started on Sat, 26 Jun 2021 22:28:01 +0800</span>
<span class="go">slurmd: CPUs=96 Boards=1 Sockets=2 Cores=24 Threads=2 Memory=385333 TmpDisk=1023500 Uptime=107065 CPUSpecList=(null) FeaturesAvail=(null) FeaturesActive=(null)</span>
<span class="go">^Cslurmd: Slurmd shutdown completing</span>
</code></pre></div>
<p>which indiates that now slurmd works well, then</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>systemctl<span class="w"> </span>restart<span class="w"> </span>slurmd.service<span class="w"> </span>
<span class="gp"># </span>systemctl<span class="w"> </span>status<span class="w"> </span>slurmd.service<span class="w"> </span>
<span class="go">● slurmd.service - Slurm node daemon</span>
<span class="go">   Loaded: loaded (/usr/lib/systemd/system/slurmd.service; enabled; vendor preset: disabled)</span>
<span class="go">   Active: active (running) since Sat 2021-06-26 22:28:23 HKT; 1s ago</span>
<span class="go"> Main PID: 129051 (slurmd)</span>
<span class="go">    Tasks: 2</span>
<span class="go">   Memory: 1.3M</span>
<span class="go">   CGroup: /system.slice/slurmd.service</span>
<span class="go">           └─129051 /usr/sbin/slurmd -D</span>

<span class="go">Jun 26 22:28:23 stapcXXX.sta.cuhk.edu.hk systemd[1]: Started Slurm node daemon.</span>
</code></pre></div>
<ul>
<li>accounting system</li>
</ul>
<p>Try to start the accounting system,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>sacctmgr<span class="w"> </span>-i<span class="w"> </span>add<span class="w"> </span>cluster<span class="w"> </span>stapcXXX
<span class="go">You are not running a supported accounting_storage plugin</span>
<span class="go">Only &#39;accounting_storage/slurmdbd&#39; is supported.</span>
</code></pre></div>
<p>the reason is that the corresponding rpm has not been installed, and also <code>slurm.conf</code> should set</p>
<div class="highlight"><pre><span></span><code><span class="nv">AccountingStorageType</span><span class="o">=</span>accounting_storage/slurmdbd
</code></pre></div>
<p>and </p>
<div class="highlight"><pre><span></span><code><span class="c1"># yum --nogpgcheck localinstall slurm-slurmdbd-20.11.7-1.el8.x86_64.rpm</span>
</code></pre></div>
<p>then check if it is ready,</p>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl start slurmdbd.service </span>
<span class="c1"># systemctl status slurmdbd.service </span>
●<span class="w"> </span>slurmdbd.service<span class="w"> </span>-<span class="w"> </span>Slurm<span class="w"> </span>DBD<span class="w"> </span>accounting<span class="w"> </span>daemon
<span class="w">   </span>Loaded:<span class="w"> </span>loaded<span class="w"> </span><span class="o">(</span>/usr/lib/systemd/system/slurmdbd.service<span class="p">;</span><span class="w"> </span>enabled<span class="p">;</span><span class="w"> </span>vendor<span class="w"> </span>preset:<span class="w"> </span>disabled<span class="o">)</span>
<span class="w">   </span>Active:<span class="w"> </span>inactive<span class="w"> </span><span class="o">(</span>dead<span class="o">)</span>
Condition:<span class="w"> </span>start<span class="w"> </span>condition<span class="w"> </span>failed<span class="w"> </span>at<span class="w"> </span>Sun<span class="w"> </span><span class="m">2021</span>-06-27<span class="w"> </span><span class="m">10</span>:38:39<span class="w"> </span>HKT<span class="p">;</span><span class="w"> </span>2s<span class="w"> </span>ago
<span class="w">           </span>└─<span class="w"> </span><span class="nv">ConditionPathExists</span><span class="o">=</span>/etc/slurm/slurmdbd.conf<span class="w"> </span>was<span class="w"> </span>not<span class="w"> </span>met
</code></pre></div>
<p>which means that we also need <code>slurmdbd.conf</code>.</p>
<ul>
<li>config <code>slurmdbd.conf</code></li>
</ul>
<p>copy the sample from <a href="https://slurm.schedmd.com/slurmdbd.conf.html">slurmdbd.conf</a></p>
<ul>
<li>config mysql</li>
</ul>
<p>following <a href="https://gist.github.com/DaisukeMiyamoto/d1dac9483ff0971d5d9f34000311d312">DaisukeMiyamoto/setup_slurm_accounting_parallelcluster.sh</a>, set mariadb as follows,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;create user &#39;slurm&#39;@&#39;localhost&#39; identified by &#39;xxxxxxxxxx&#39;; grant all on slurm_acct_db.* TO &#39;slurm&#39;@&#39;localhost&#39;; create database slurm_acct_db;&quot;</span>
</code></pre></div>
<p>then tried to run</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>slurmdbd<span class="w"> </span>-D
<span class="go">slurmdbd: error: mysql_real_connect failed: 2002 Can&#39;t connect to local MySQL server through socket &#39;/var/lib/mysql/mysql.sock&#39; (2)</span>
<span class="go">slurmdbd: error: The database must be up when starting the MYSQL plugin.  Trying again in 5 seconds.</span>
<span class="go">^C</span>
</code></pre></div>
<p>so mysql has not been started,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>mariadb
<span class="go">Created symlink /etc/systemd/system/mysql.service → /usr/lib/systemd/system/mariadb.service.</span>
<span class="go">Created symlink /etc/systemd/system/mysqld.service → /usr/lib/systemd/system/mariadb.service.</span>
<span class="go">Created symlink /etc/systemd/system/multi-user.target.wants/mariadb.service → /usr/lib/systemd/system/mariadb.service.</span>
<span class="gp"># </span>systemctl<span class="w"> </span>start<span class="w"> </span>mariadb
</code></pre></div>
<p>then run again</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>slurmdbd<span class="w"> </span>-D
<span class="go">slurmdbd: accounting_storage/as_mysql: _check_mysql_concat_is_sane: MySQL server version is: 10.3.28-MariaDB</span>
<span class="go">slurmdbd: error: Database settings not recommended values: innodb_buffer_pool_size innodb_lock_wait_timeout</span>
<span class="go">slurmdbd: slurmdbd version 20.11.7 started</span>
<span class="go">^Cslurmdbd: Terminate signal (SIGINT or SIGTERM) received</span>
</code></pre></div>
<p>refer to <a href="https://wiki.fysik.dtu.dk/niflheim/Slurm_database#id5">Slurm database &ndash; MySQL configuration</a>, write the following</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>mysqld<span class="o">]</span>
<span class="nv">innodb_buffer_pool_size</span><span class="o">=</span>1024M
<span class="nv">innodb_log_file_size</span><span class="o">=</span>64M
<span class="nv">innodb_lock_wait_timeout</span><span class="o">=</span><span class="m">900</span>
</code></pre></div>
<p>into file <code>/etc/my.cnf.d/innodb.cnf</code>, then restart </p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>systemctl<span class="w"> </span>stop<span class="w"> </span>mariadb
<span class="gp"># </span>systemctl<span class="w"> </span>start<span class="w"> </span>mariadb
</code></pre></div>
<p>now it is OK to run</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>slurmdbd<span class="w"> </span>-D
<span class="go">slurmdbd: accounting_storage/as_mysql: _check_mysql_concat_is_sane: MySQL server version is: 10.3.28-MariaDB</span>
<span class="go">slurmdbd: slurmdbd version 20.11.7 started</span>
<span class="go">^Cslurmdbd: Terminate signal (SIGINT or SIGTERM) received</span>
</code></pre></div>
<p>then satrt the service</p>
<div class="highlight"><pre><span></span><code><span class="c1"># systemctl enable slurmdbd</span>
<span class="c1"># systemctl start slurmdbd</span>
<span class="c1"># systemctl status slurmdbd</span>
●<span class="w"> </span>slurmdbd.service<span class="w"> </span>-<span class="w"> </span>Slurm<span class="w"> </span>DBD<span class="w"> </span>accounting<span class="w"> </span>daemon
<span class="w">   </span>Loaded:<span class="w"> </span>loaded<span class="w"> </span><span class="o">(</span>/usr/lib/systemd/system/slurmdbd.service<span class="p">;</span><span class="w"> </span>enabled<span class="p">;</span><span class="w"> </span>vendor<span class="w"> </span>preset:<span class="w"> </span>disabled<span class="o">)</span>
<span class="w">   </span>Active:<span class="w"> </span>active<span class="w"> </span><span class="o">(</span>running<span class="o">)</span><span class="w"> </span>since<span class="w"> </span>Sun<span class="w"> </span><span class="m">2021</span>-06-27<span class="w"> </span><span class="m">10</span>:58:27<span class="w"> </span>HKT<span class="p">;</span><span class="w"> </span>3s<span class="w"> </span>ago
<span class="w"> </span>Main<span class="w"> </span>PID:<span class="w"> </span><span class="m">190603</span><span class="w"> </span><span class="o">(</span>slurmdbd<span class="o">)</span>
<span class="w">    </span>Tasks:<span class="w"> </span><span class="m">5</span>
<span class="w">   </span>Memory:<span class="w"> </span><span class="m">1</span>.8M
<span class="w">   </span>CGroup:<span class="w"> </span>/system.slice/slurmdbd.service
<span class="w">           </span>└─190603<span class="w"> </span>/usr/sbin/slurmdbd<span class="w"> </span>-D

Jun<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">10</span>:58:27<span class="w"> </span>stapcXXX.sta.cuhk.edu.hk<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Started<span class="w"> </span>Slurm<span class="w"> </span>DBD<span class="w"> </span>accounting<span class="w"> </span>daemon.
</code></pre></div>
<ul>
<li>set up qos</li>
</ul>
<p>need to add account and user, otherwise the users are outside the control,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>sacctmgr<span class="w"> </span>add<span class="w"> </span>account<span class="w"> </span>project<span class="w"> </span><span class="nv">Description</span><span class="o">=</span><span class="s2">&quot;Projects&quot;</span><span class="w"> </span><span class="nv">Organization</span><span class="o">=</span>project
<span class="gp"># </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">01</span>..14<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>sacctmgr<span class="w"> </span>-i<span class="w"> </span>create<span class="w"> </span>user<span class="w"> </span><span class="nv">name</span><span class="o">=</span>project<span class="nv">$i</span><span class="w"> </span><span class="nv">DefaultAccount</span><span class="o">=</span>project<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
</code></pre></div>
<p>then set the maximum submit jobs per user,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>sacctmgr<span class="w"> </span>modify<span class="w"> </span>qos<span class="w"> </span>normal<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">maxsubmitjobsperuser</span><span class="o">=</span><span class="m">90</span>
</code></pre></div>
<p>remove the restriction via setting a larger number (how to directly remove the constraint)</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>sacctmgr<span class="w"> </span>modify<span class="w"> </span>qos<span class="w"> </span>normal<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">maxsubmitjobsperuser</span><span class="o">=</span><span class="m">10000</span>
</code></pre></div>
<p>together with the number of cores,</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>sacctmgr<span class="w"> </span>modify<span class="w"> </span>qos<span class="w"> </span>normal<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">GrpTRES</span><span class="o">=</span><span class="nv">cpu</span><span class="o">=</span><span class="m">90</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">sacctmgr modify qos normal set MaxTRESPerUser=cpu=80</span>
</code></pre></div>
<p>but then I found that the submitted jobs are out of control. Then I realized that the account and user associations only take effect after enabling</p>
<div class="highlight"><pre><span></span><code><span class="go">AccountingStorageEnforce=limits</span>
</code></pre></div>
<p>according to <a href="https://wiki.fysik.dtu.dk/niflheim/Slurm_accounting">Slurm accounting &ndash; Resource Limits</a>. Then for sure, restart <code>slurmd</code>, <code>slurmctld</code>, and <code>slurmdbd</code>, then the policy starts to work.</p>
<p>Then found that after changing the policy, no need to restart any service.</p>
<h2 id="cgroup">CGroup<a class="headerlink" href="#cgroup" title="Permanent link">&para;</a></h2>
<p>Inspired by <a href="https://rolk.github.io/2015/04/20/slurm-cluster">Setting up a single server SLURM cluster &ndash; Setting up Control Groups</a>, I tried to add CGroup to control the process directly run from ssh session.</p>
<ul>
<li>install cgroup</li>
</ul>
<p>following <a href="https://www.server-world.info/en/note?os=CentOS_7&amp;p=cgroups&amp;f=1">Cgroups : Install</a></p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>yum<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>libcgroup<span class="w"> </span>libcgroup-tools
<span class="gp"># </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>cgconfig
<span class="gp"># </span>systemctl<span class="w"> </span>start<span class="w"> </span>cgconfig
<span class="gp"># </span>systemctl<span class="w"> </span>status<span class="w"> </span>cgconfig
<span class="go">● cgconfig.service - Control Group configuration service</span>
<span class="go">   Loaded: loaded (/usr/lib/systemd/system/cgconfig.service; enabled; vendor preset: disabled)</span>
<span class="go">   Active: active (exited) since Sun 2021-06-27 11:10:27 HKT; 7s ago</span>
<span class="go">  Process: 191469 ExecStart=/usr/sbin/cgconfigparser -l /etc/cgconfig.conf -s 1664 (code=exited, status=0/SUCCESS)</span>
<span class="go"> Main PID: 191469 (code=exited, status=0/SUCCESS)</span>

<span class="go">Jun 27 11:10:27 stapcXXX.sta.cuhk.edu.hk systemd[1]: Starting Control Group configuration service...</span>
<span class="go">Jun 27 11:10:27 stapcXXX.sta.cuhk.edu.hk systemd[1]: Started Control Group configuration service.</span>
</code></pre></div>
<p>here is an interesting finding. Different from other services, <code>active (running)</code>, it shows <code>active (exited)</code>, more details refer to the discussion <a href="https://askubuntu.com/questions/1304142/systemctl-status-active-exited-vs-running">systemctl status active: exited vs running</a>.</p>
<p>then write <code>cgconfig.conf</code> and <code>cgrules.conf</code>, and then tried to restart <code>cgconfig</code>, but it seems no idea to judge if the setting takes effects.</p>
<p>Then I got to know that there is another <a href="https://docs.oracle.com/en/operating-systems/oracle-linux/6/adminsg/ol_cpuset_cgroups.html"><code>cpuset</code> parameter</a> which can specify a list of CPU cores to which a group has access. Then I tried to add such parameter to <code>cgconfig.conf</code>,</p>
<div class="highlight"><pre><span></span><code>cpuset<span class="w"> </span><span class="o">{</span>
<span class="w">    </span>cpuset.cpus<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="o">}</span>
</code></pre></div>
<p>and also update the corresponding <code>cgrules.conf</code>. Then I open an R session to run an expensive operation,</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">matrix</span><span class="p">(</span><span class="nf">rnorm</span><span class="p">(</span><span class="m">100000000</span><span class="p">),</span><span class="n">nrow</span><span class="o">=</span><span class="m">10000</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w"> </span><span class="nf">replicate</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="o">%*%</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>
<p>and open another session with the same user. The target is to check if these two sessions are limited to a single core. However, each of them reach around 100% CPU.</p>
<p>Tried to install PAM-cgroup as also mentioned in <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/resource_management_guide/sec-cpu_and_memory-use_case#proc-cpu_and_mem">4.3. PER-GROUP DIVISION OF CPU AND MEMORY RESOURCES &ndash; Procedure 4.4. Using a PAM module to move processes to cgroups</a></p>
<p>but still not work.</p>
<p>To validate if cpu and memory work, also run the same R script in the root session. According to <code>cgrules.conf</code>, the root session should be faster since it does not have additional restriction, but no differences.</p>
<p>In the checking procedure, I learn to</p>
<ul>
<li>find the cgroup of a process, and no <code>interactive</code> shows, <a href="https://serverfault.com/questions/560206/how-to-find-out-cgroup-of-a-particular-process/899248">How to find out cgroup of a particular process?</a></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>systemctl<span class="w"> </span>status<span class="w"> </span><span class="m">3378</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>CGroup
<span class="gp"># </span>cat<span class="w"> </span>/proc/3378/cgroup<span class="w"> </span>
</code></pre></div>
<ul>
<li>list cgroup in top: press <code>f</code>, then select <code>cgroup</code></li>
<li>pure list cgroup as in top: <code>systemd-cgtop</code></li>
<li>check parameter, <code>cgget -r cpuset.cpus</code> interactive: <a href="https://docs.oracle.com/en/operating-systems/oracle-linux/6/admin/ol_getset_param_cgroups.html">10.8 Displaying and Setting Subsystem Parameters</a></li>
</ul>
<p>Maybe I need to change another way, and I saw <code>set-property</code> in <a href="https://zhuanlan.zhihu.com/p/74299886">深入理解 Linux Cgroup 系列（一）：基本概念</a></p>
<p>Then I tried to set the CPUQuota for user via (refer to <a href="https://serverfault.com/questions/874274/systemd-per-user-cpu-and-or-memory-limits">systemd, per-user cpu and/or memory limits</a>)</p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/systemd/system/user-.slice.d
</code></pre></div>
<p>then write</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>Slice<span class="o">]</span>
<span class="nv">CPUQuota</span><span class="o">=</span><span class="m">20</span>%
</code></pre></div>
<p>into <code>cpu.conf</code>, which means that the executed processes never get more than 20% CPU time on a single CPU (refer to <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/resource_management_guide/sec-modifying_control_groups">2.3. MODIFYING CONTROL GROUPS</a>), then </p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>systemctl<span class="w"> </span>daemon-reload
</code></pre></div>
<p>Repeat the above R script, the CPU percentage would be limited to 20%, not only regular user, but also root, since root is <code>user-0</code>, such as </p>
<div class="highlight"><pre><span></span><code><span class="gp"># </span>ls<span class="w"> </span>/sys/fs/cgroup/systemd/user.slice
<span class="go">cgroup.clone_children  cgroup.procs  notify_on_release  tasks  user-0.slice  user-1002.slice</span>
</code></pre></div>
<p>but it would not affected jobs submitted via slurm, which has been validated. So this way would be quite good.</p>
<h2 id="selecttypeparameters">SelectTypeParameters<a class="headerlink" href="#selecttypeparameters" title="Permanent link">&para;</a></h2>
<p>The default setting is </p>
<div class="highlight"><pre><span></span><code><span class="nv">SelectType</span><span class="o">=</span><span class="k">select</span>/cons_tres
<span class="nv">SelectTypeParameters</span><span class="o">=</span>CR_Core
</code></pre></div>
<p>the configuration of computing node is </p>
<div class="highlight"><pre><span></span><code><span class="nv">NodeName</span><span class="o">=</span>stapc051<span class="w"> </span><span class="nv">CPUs</span><span class="o">=</span><span class="m">96</span><span class="w"> </span><span class="nv">Sockets</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">CoresPerSocket</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="nv">ThreadsPerCore</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">State</span><span class="o">=</span>UNKNOWN
</code></pre></div>
<p>With this setting, each job would automatically count 2 virtually CPUs, although we only request one CPU.</p>
<p>After changing <code>CR_Core</code> to <code>CR_CPU</code>, each job would count 1 virtually CPU.</p>
<p>However, the number of running jobs is still only 48, while the limits are <code>GrpTRES=cpu=90</code> and <code>MaxTRESPerUser=cpu=90</code>. </p>
<p>My first guess is the scheduling system does not update on time, since if I count the completed jobs in <code>sacct -a -X</code>, the total number of cores coincidently equals to 90, then I tried to set a larger limit but not work.</p>
<p>Ocassionally, I found how to unset the limit, use <code>-1</code>, such as <a href="https://slurm.schedmd.com/resource_limits.html">Resource Limits</a></p>
<div class="highlight"><pre><span></span><code>sacctmgr<span class="w"> </span>modify<span class="w"> </span>user<span class="w"> </span>bob<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">GrpTRES</span><span class="o">=</span><span class="nv">cpu</span><span class="o">=</span>-1,mem<span class="o">=</span>-1,gres/gpu<span class="o">=</span>-1
</code></pre></div>
<p>Notice that 48 is a special number, <code>96 / 2 = 48</code>, so my second guess is that each running job is still occupying a core, even though it indeed only counts a virtual CPU.</p>
<p>Check the potential related configurations,</p>
<ul>
<li>TaskPlugin: change the default <code>task/none</code> to <code>task/affinity</code>, since there are some related materials, <a href="https://slurm.schedmd.com/mc_support.html">Support for Multi-core/Multi-thread Architectures</a>, mentioned it. But not work.</li>
<li><code>--hint=nomultithread</code>: this is not a system configuration, but it can also cause only 48 jobs are running, then I have a better idea on the allocation on multi-thread machine, and here is an official example, <a href="https://slurm.schedmd.com/cpu_management.html">EXAMPLE 9: CONSUMABLE RESOURCES ON MULTITHREADED NODE, ALLOCATING ONLY ONE THREAD PER CORE</a>, and some examples in the mail list, <a href="https://bugs.schedmd.com/show_bug.cgi?id=4010">Bug 4010 - Exploring Hyper-Threading CPU nodes</a></li>
</ul>
<p>Recheck the explanation of <code>CR_CPU</code>, here is one more sentence,</p>
<blockquote>
<p>The node&rsquo;s Boards, Sockets, CoresPerSocket and ThreadsPerCore may optionally be configured and result in job allocations which have improved locality; however doing so will prevent more than one job from being allocated on each core.</p>
</blockquote>
<p>I remembered the specification <code>Sockets=2 CoresPerSocket=24 ThreadsPerCore=2</code> is required under the default <code>CR_Core</code>, otherwise it would throw errors. But according to this warning, it would prevent twos job from being allocated on one core. Then I tried to remove this specification, and then the number of running jobs is not only 48!</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>get pid of slurm job
<div class="highlight"><pre><span></span><code><span class="gp"># </span>scontrol<span class="w"> </span>listpids<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">1261</span>
</code></pre></div>
then check the allow cpu list as in <a href="https://bugs.schedmd.com/show_bug.cgi?id=4010">Bug 4010 - Exploring Hyper-Threading CPU nodes</a>,
before removing the specification, it shows
<div class="highlight"><pre><span></span><code><span class="gp"># </span>cat<span class="w"> </span>/proc/2636286/status<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>cpus_allowed_list
<span class="go">Cpus_allowed_list:  0-95</span>
</code></pre></div>
but after working normally, 
<div class="highlight"><pre><span></span><code><span class="gp"># </span>cat<span class="w"> </span>/proc/2636286/status<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-i<span class="w"> </span>cpus_allowed_list
<span class="go">Cpus_allowed_list:  43</span>
</code></pre></div>
so it can be an indicator to check whether the job is allocated normally.</p>
</div>
<h2 id="privatedata">PrivateData<a class="headerlink" href="#privatedata" title="Permanent link">&para;</a></h2>
<p>Currently every user can view all users&rsquo; job information via <code>squeue</code>. </p>
<p>Set </p>
<div class="highlight"><pre><span></span><code><span class="nv">PrivateData</span><span class="o">=</span><span class="nb">jobs</span>
</code></pre></div>
<p>in <code>slurm.conf</code>.</p>
<p>And here are some other fields can be appended, such as <code>usage</code>, <code>users</code>, refer to <a href="https://slurm.schedmd.com/slurm.conf.html">slurm.conf - Slurm configuration file</a> or <code>man slurm.conf</code> for more details.</p>
<h2 id="diagnose-network-speed">Diagnose Network Speed<a class="headerlink" href="#diagnose-network-speed" title="Permanent link">&para;</a></h2>
<p>On 6/30/21 3:16 PM, found that the network speed on the new machine seems abnormal.</p>
<blockquote>
<p>I am downloading a file via <code>wget</code>, but the speed is quite slow, just ~500kb/s, while it can achieve ~4MB/s when I try to download it from our old server</p>
</blockquote>
<p>Then for complete comparisons, use the script</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py<span class="w"> </span><span class="p">|</span><span class="w"> </span>python<span class="w"> </span>-
</code></pre></div>
<p>to test the network speed (refer to <a href="https://askubuntu.com/questions/104755/how-to-check-internet-speed-via-terminal">How to check Internet Speed via Terminal? - Ask Ubuntu</a></p>
<p>Also repeat the test on the new server to reduce random noise. The results show that both download and upload speed on the new server are much slower than the old group server and my personal laptop, ~90Mbit/s vs ~350Mbit/s.</p>
<p><img alt="" src="https://user-images.githubusercontent.com/13688320/130889726-6168fff7-96c8-4ace-848c-587592e3075b.png" /></p>
<p>Notice that</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>dmesg<span class="w"> </span>-T<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>enp
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">14</span>:30:59<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span><span class="m">1000</span><span class="w"> </span>Mbps<span class="w"> </span>Full<span class="w"> </span>Duplex,<span class="w"> </span>Flow<span class="w"> </span>Control:<span class="w"> </span>RX
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">14</span>:31:01<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">14</span>:31:26<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span><span class="m">100</span><span class="w"> </span>Mbps<span class="w"> </span>Full<span class="w"> </span>Duplex,<span class="w"> </span>Flow<span class="w"> </span>Control:<span class="w"> </span>RX
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">14</span>:31:26<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>Link<span class="w"> </span>Speed<span class="w"> </span>was<span class="w"> </span>downgraded<span class="w"> </span>by<span class="w"> </span>SmartSpeed
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:34:48<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:35:13<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span><span class="m">100</span><span class="w"> </span>Mbps<span class="w"> </span>Full<span class="w"> </span>Duplex,<span class="w"> </span>Flow<span class="w"> </span>Control:<span class="w"> </span>RX
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:35:13<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>Link<span class="w"> </span>Speed<span class="w"> </span>was<span class="w"> </span>downgraded<span class="w"> </span>by<span class="w"> </span>SmartSpeed
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:45:47<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:46:13<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span><span class="m">100</span><span class="w"> </span>Mbps<span class="w"> </span>Full<span class="w"> </span>Duplex,<span class="w"> </span>Flow<span class="w"> </span>Control:<span class="w"> </span>RX
<span class="o">[</span>Mon<span class="w"> </span>Jun<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">15</span>:46:13<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>Link<span class="w"> </span>Speed<span class="w"> </span>was<span class="w"> </span>downgraded<span class="w"> </span>by<span class="w"> </span>SmartSpeed
</code></pre></div>
<p>where it reports that NIC link is downgraded from 1000 Mbps to 100 Mbps by SmartSpeed, which might explain that previous the fastest speed is less than 100Mbit/s.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code>dmesg</code> 用于显示开机信息。kernel 会将开机信息储存在 ring buffer 中，也保存在 <code>/var/log/dmesg</code> 文件中（参考 <a href="https://www.runoob.com/linux/linux-comm-dmesg.html">Linux dmesg 命令 | 菜鸟教程</a>）。</p>
<p>而 <code>man dmesg</code> 说该命令用于 <code>print or control the kernel ring buffer</code>，所以能够互相印证，但是 ring buffer 是否只存开机信息？</p>
<ul>
<li><code>-T</code> 表示以可读的时间戳显示。</li>
</ul>
<p>默认时间戳为 “time in seconds since the kernel started”，这也是 <code>dmesg</code> 文件中的默认格式。如果支持 <code>-T</code>，自然是很方便的，否则可能需要写脚本转换，详见 <a href="https://stackoverflow.com/questions/13890789/how-do-i-convert-dmesg-timestamp-to-custom-date-format">How do I convert dmesg timestamp to custom date format? - Stack Overflow</a></p>
</div>
<p>After moving to the new place, the speed seems much faster (8/16/21, 10:46 AM). The speed can achieve 500 Mbit/s (Upload) and 800 Mbit/s (Download), while previously just 90 Mbit/s. And</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>dmesg<span class="w"> </span>-T<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>enp
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:14:58<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>renamed<span class="w"> </span>from<span class="w"> </span>eth0
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:14:58<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>e1000e<span class="w"> </span><span class="m">0000</span>:00:1f.6<span class="w"> </span>enp0s31f6:<span class="w"> </span>renamed<span class="w"> </span>from<span class="w"> </span>eth0
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:05<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>enp0s31f6:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:05<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>enp0s31f6:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:05<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>enp2s0:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:05<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>enp2s0:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:05<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>enp0s31f6:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:05<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>enp2s0:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:05<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_UP<span class="o">)</span>:<span class="w"> </span>enp2s0:<span class="w"> </span>link<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:10<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>e1000e<span class="w"> </span><span class="m">0000</span>:00:1f.6<span class="w"> </span>enp0s31f6:<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span><span class="m">1000</span><span class="w"> </span>Mbps<span class="w"> </span>Full<span class="w"> </span>Duplex,<span class="w"> </span>Flow<span class="w"> </span>Control:<span class="w"> </span>None
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:15:10<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_CHANGE<span class="o">)</span>:<span class="w"> </span>enp0s31f6:<span class="w"> </span>link<span class="w"> </span>becomes<span class="w"> </span>ready
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:16:26<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>e1000e<span class="w"> </span><span class="m">0000</span>:00:1f.6<span class="w"> </span>enp0s31f6:<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:16:30<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>igb<span class="w"> </span><span class="m">0000</span>:02:00.0<span class="w"> </span>enp2s0:<span class="w"> </span>igb:<span class="w"> </span>enp2s0<span class="w"> </span>NIC<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span><span class="m">1000</span><span class="w"> </span>Mbps<span class="w"> </span>Full<span class="w"> </span>Duplex,<span class="w"> </span>Flow<span class="w"> </span>Control:<span class="w"> </span>RX
<span class="o">[</span>Mon<span class="w"> </span>Aug<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">10</span>:16:31<span class="w"> </span><span class="m">2021</span><span class="o">]</span><span class="w"> </span>IPv6:<span class="w"> </span>ADDRCONF<span class="o">(</span>NETDEV_CHANGE<span class="o">)</span>:<span class="w"> </span>enp2s0:<span class="w"> </span>link<span class="w"> </span>becomes<span class="w"> </span>ready
</code></pre></div>
<p>it stays at 1000 Mbps, which seems to support the testing results.</p>
<p>Alternatively, we can use </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ethtool<span class="w"> </span>enp2s0<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Speed
<span class="w">    </span>Speed:<span class="w"> </span>1000Mb/s
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>/sys/class/net/enp2s0/speed
<span class="m">1000</span>
</code></pre></div>
<p>to obtain the speed of the NIC. It is -1 for unused interfaces. Refer to <a href="https://serverfault.com/questions/207474/how-do-i-verify-the-speed-of-my-nic">How do I verify the speed of my NIC? - Server Fault</a></p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">June 14, 2022</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">June 27, 2021</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2023 weiya
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/szcf-weiya" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://esl.hohoweiya.xyz" target="_blank" rel="noopener" title="esl.hohoweiya.xyz" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hohoweiya.xyz" target="_blank" rel="noopener" title="hohoweiya.xyz" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2 0-3.3-.1-1.4.1-2.8.1-4.2.1H392c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9.1-2.8v-69.6H32c-18 0-32-14-32-32.1 0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7l255.4 224.5c8 7 12 15 11 24z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://stats.hohoweiya.xyz" target="_blank" rel="noopener" title="stats.hohoweiya.xyz" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M168 80c-13.3 0-24 10.7-24 24v304c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112c0-13.3 10.7-24 24-24s24 10.7 24 24v296c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72h272c39.8 0 72 32.2 72 72v304c0 39.8-32.2 72-72 72H72zm104-344c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24h-96c-13.3 0-24-10.7-24-24v-80zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24s10.7-24 24-24zm-176 80h208c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h208c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://blog.csdn.net/szcf715" target="_blank" rel="noopener" title="blog.csdn.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 80c-8.8 0-16 7.2-16 16v320c0 8.8 7.2 16 16 16h224v-80c0-17.7 14.3-32 32-32h80V96c0-8.8-7.2-16-16-16H64zm224 400H64c-35.3 0-64-28.7-64-64V96c0-35.3 28.7-64 64-64h320c35.3 0 64 28.7 64 64v229.5c0 17-6.7 33.3-18.7 45.3l-90.5 90.5c-12 12-28.3 18.7-45.3 18.7H288z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:szcfweiya@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16v22.1l172.5 141.6c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16H64zM48 212.2V384c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "content.action.edit"], "search": "../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
        <script src="../../javascripts/baiduzhanzhang.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>