
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="技术博客">
      
      
        <meta name="author" content="weiya">
      
      
        <link rel="canonical" href="https://tech.hohoweiya.xyz/Linux/chpc/">
      
      
        <link rel="prev" href="../asAserver/">
      
      
        <link rel="next" href="../blog/2020-12-17-passwordless-failed/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Tips - techNotes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    

  

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1JWL5Y1W90"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1JWL5Y1W90');
  </script>
  <script data-ad-client="ca-pub-3680148472128768" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#notes-on-chpc-cluster" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="techNotes" class="md-header__button md-logo" aria-label="techNotes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            techNotes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tips
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/szcf-weiya/techNotes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    szcf-weiya/techNotes
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Linux
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../comparisons/stat/" class="md-tabs__link">
        StatProgramming
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../Cpp/" class="md-tabs__link">
        CSProgramming
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../TeX/" class="md-tabs__link">
        DocProgramming
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Internet/sci-int/" class="md-tabs__link">
        Network/Internet
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../autotools/" class="md-tabs__link">
        Development
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../stats/prob/" class="md-tabs__link">
        Stat
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../biology/samtools/" class="md-tabs__link">
        InvitedPosts
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../English/" class="md-tabs__link">
        Misc
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="techNotes" class="md-nav__button md-logo" aria-label="techNotes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    techNotes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/szcf-weiya/techNotes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    szcf-weiya/techNotes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Laptops
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Laptops
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ubuntu/" class="md-nav__link">
        Ubuntu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software/" class="md-nav__link">
        Application Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Command-line Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/" class="md-nav__link">
        Shell Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsl/" class="md-nav__link">
        WSL
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2_6" id="__nav_2_2_6_label" tabindex="0">
          Blog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_6">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2020-08-25-PSSD/" class="md-nav__link">
        Portable SSD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2020-09-01-charge-battery-adaptively/" class="md-nav__link">
        Charge Battery Adaptively
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2021-06-07-switch-monitor/" class="md-nav__link">
        Switch Monitor Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2021-07-28-use-old-kernel/" class="md-nav__link">
        Use Old Kernel
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Servers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Servers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../servers/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ecs/" class="md-nav__link">
        AliECS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rocky-server/" class="md-nav__link">
        Rocky-Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../asAserver/" class="md-nav__link">
        G40
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          CHPC-Cluster
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          CHPC-Cluster
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Tips
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Tips
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#login" class="md-nav__link">
    Login
  </a>
  
    <nav class="md-nav" aria-label="Login">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passwordless" class="md-nav__link">
    passwordless
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bypass-the-login-node" class="md-nav__link">
    bypass the login node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-commands" class="md-nav__link">
    Custom Commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-mode" class="md-nav__link">
    Interactive Mode
  </a>
  
    <nav class="md-nav" aria-label="Interactive Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qsub-i" class="md-nav__link">
    qsub -I
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#srun-w" class="md-nav__link">
    srun -w
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submitting-multiple-jobs" class="md-nav__link">
    Submitting Multiple Jobs
  </a>
  
    <nav class="md-nav" aria-label="Submitting Multiple Jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pbs" class="md-nav__link">
    PBS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slurm" class="md-nav__link">
    SLURM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specify-nodes" class="md-nav__link">
    Specify Nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exit-code" class="md-nav__link">
    Exit Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-priority" class="md-nav__link">
    Job Priority
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qos" class="md-nav__link">
    QOS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpumemory-usage" class="md-nav__link">
    CPU/Memory Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk-quota" class="md-nav__link">
    Disk Quota
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-module" class="md-nav__link">
    Custom Module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-usage" class="md-nav__link">
    GPU Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inherited-environment" class="md-nav__link">
    Inherited Environment
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
          Blog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_2">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2020-12-17-passwordless-failed/" class="md-nav__link">
        Fail to SSH passwordlessly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2021-05-12-fail-to-access-home/" class="md-nav__link">
        Fail to Access Home
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blog/2022-11-19-why-job-restart/" class="md-nav__link">
        Why Job Restart?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          StatProgramming
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          StatProgramming
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../comparisons/stat/" class="md-nav__link">
        Comparisons
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          R
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          R
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../R/" class="md-nav__link">
        Base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../R/plot/" class="md-nav__link">
        Plot
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
          Blog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../R/legend_from_zhihu/" class="md-nav__link">
        ggplot2 中的 legend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../R/sample/" class="md-nav__link">
        new sample function (v3.6.0+)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../R/factor/" class="md-nav__link">
        一道与 factor 有关的问题
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          Python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/" class="md-nav__link">
        Base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/conda/" class="md-nav__link">
        Conda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/opencv/" class="md-nav__link">
        OpenCV
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/rpy2/" class="md-nav__link">
        rpy2
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3_5" id="__nav_3_3_5_label" tabindex="0">
          Blog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3_5">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/pystan/" class="md-nav__link">
        PyStan 体验
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../python/esltag/" class="md-nav__link">
        自建关键词索引页
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Julia
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Julia
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../julia/" class="md-nav__link">
        Base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../julia/plot/" class="md-nav__link">
        Plot
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          Matlab
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Matlab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Matlab/" class="md-nav__link">
        Base
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../SAS/" class="md-nav__link">
        SAS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          CSProgramming
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          CSProgramming
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
      
      
      
        <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
          C/C++
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          C/C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Cpp/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Cpp/Qt/" class="md-nav__link">
        Qt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java/" class="md-nav__link">
        Java
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          SQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          SQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../SQL/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../R/install-notes-for-rmysql/" class="md-nav__link">
        RMySQL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cuda/" class="md-nav__link">
        Cuda
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          DocProgramming
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          DocProgramming
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
      
      
      
        <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
          TeX
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          TeX
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/CI/" class="md-nav__link">
        TravisCI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/arxiv/" class="md-nav__link">
        arXiv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/vargreek/" class="md-nav__link">
        VarGreek
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../TeX/overleaf/" class="md-nav__link">
        Overleaf
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
      
      
      
        <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
          Markdown
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Markdown
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../doc/markdown/" class="md-nav__link">
        General
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          StaticPages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          StaticPages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../website/" class="md-nav__link">
        Website
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../website/disqus/" class="md-nav__link">
        Disqus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../website/css/" class="md-nav__link">
        CSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../js/" class="md-nav__link">
        JS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../website/analytics/" class="md-nav__link">
        Analytics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          DynamicPages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          DynamicPages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../PHP/" class="md-nav__link">
        PHP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../website/xampp/" class="md-nav__link">
        XAMPP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Network/Internet
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Network/Internet
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/sci-int/" class="md-nav__link">
        科学上网
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/" class="md-nav__link">
        一般问题
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/ipv6/" class="md-nav__link">
        IPv6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Internet/encrypt/" class="md-nav__link">
        加密算法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../autotools/" class="md-nav__link">
        Autotools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../phantomjs/" class="md-nav__link">
        Phantomjs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Stat
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Stat
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stats/prob/" class="md-nav__link">
        Probability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stats/" class="md-nav__link">
        Statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scientific/" class="md-nav__link">
        Scientific
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stats/matrix/" class="md-nav__link">
        Matrix
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          InvitedPosts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          InvitedPosts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/samtools/" class="md-nav__link">
        Samtools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../maximum-usage-of-ITSC-cluster-resource/" class="md-nav__link">
        MaxClusterUsage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
      
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Misc
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Misc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../English/" class="md-nav__link">
        English
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guitar/" class="md-nav__link">
        Guitar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../win/" class="md-nav__link">
        Windows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../biology/" class="md-nav__link">
        Biology
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../finance/" class="md-nav__link">
        Finance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fresh/" class="md-nav__link">
        Fresh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../links/" class="md-nav__link">
        Links
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/live/" class="md-nav__link">
        Live
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/wx/" class="md-nav__link">
        小程序
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/wxjssdk/" class="md-nav__link">
        jssdk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/report/" class="md-nav__link">
        讲座
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mi/" class="md-nav__link">
        Mi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/terms/" class="md-nav__link">
        Terminology
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#login" class="md-nav__link">
    Login
  </a>
  
    <nav class="md-nav" aria-label="Login">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#passwordless" class="md-nav__link">
    passwordless
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bypass-the-login-node" class="md-nav__link">
    bypass the login node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-commands" class="md-nav__link">
    Custom Commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-mode" class="md-nav__link">
    Interactive Mode
  </a>
  
    <nav class="md-nav" aria-label="Interactive Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qsub-i" class="md-nav__link">
    qsub -I
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#srun-w" class="md-nav__link">
    srun -w
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submitting-multiple-jobs" class="md-nav__link">
    Submitting Multiple Jobs
  </a>
  
    <nav class="md-nav" aria-label="Submitting Multiple Jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pbs" class="md-nav__link">
    PBS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slurm" class="md-nav__link">
    SLURM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#specify-nodes" class="md-nav__link">
    Specify Nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exit-code" class="md-nav__link">
    Exit Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-priority" class="md-nav__link">
    Job Priority
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qos" class="md-nav__link">
    QOS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpumemory-usage" class="md-nav__link">
    CPU/Memory Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk-quota" class="md-nav__link">
    Disk Quota
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-module" class="md-nav__link">
    Custom Module
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-usage" class="md-nav__link">
    GPU Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inherited-environment" class="md-nav__link">
    Inherited Environment
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="notes-on-chpc-cluster">Notes on CHPC-Cluster<a class="headerlink" href="#notes-on-chpc-cluster" title="Permanent link">&para;</a></h1>
<h2 id="login">Login<a class="headerlink" href="#login" title="Permanent link">&para;</a></h2>
<h3 id="passwordless">passwordless<a class="headerlink" href="#passwordless" title="Permanent link">&para;</a></h3>
<p>It is annoying to enter your password when you login the server. Here is a strategy to automatically login.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Linux/Mac</label><label for="__tabbed_1_2">Windows</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>In the command line, generate SSH key pair by running </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ssh-keygen<span class="w"> </span>-t<span class="w"> </span>rsa
</code></pre></div>
<p>then copy the generated public key <code>~/.ssh/id_rsa.pub</code> to the file <code>~/.ssh/authorized_keys</code> on the server (if no such file and folder, just create them). See <a href="../servers#initial-start"><img alt="🔗" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f517.svg" title=":link:" /></a> for more details.</p>
</div>
<div class="tabbed-block">
<p>If you use the Windows Subsystem for Linux (WSL), just follow the steps for &ldquo;Linux/Mac&rdquo;.</p>
<p>Take the PuTTY client as an example, you can use PuTTYgen to generate the ssh key pair. Here is a <a href="https://www.ssh.com/academy/ssh/putty/windows/puttygen">tutorial</a>.</p>
</div>
</div>
</div>
<p>Now, we can directly access the server via</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ssh<span class="w"> </span>USERNAME@chpc-login01.itsc.cuhk.edu.hk
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For clients such as PuTTY on Windows, just type the username and host in the specific blanks. Moreover, you can always re-express a SSH command by typing each filed in the respective blank.</p>
</div>
<p>Since the login node is not suggested/allowed to run your test jobs, it would be more convenient to login in the test node, <code>sandbox</code>. This can be done with consecutive ssh,</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ssh<span class="w"> </span>-t<span class="w"> </span>USERNAME@chpc-login01.itsc.cuhk.edu.hk<span class="w"> </span>ssh<span class="w"> </span>sandbox
</code></pre></div>
<p>where <code>-t</code> aims to avoid the following warning</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Pseudo-terminal will not be allocated because stdin is not a terminal.</p>
</div>
<h3 id="bypass-the-login-node">bypass the login node<a class="headerlink" href="#bypass-the-login-node" title="Permanent link">&para;</a></h3>
<div class="admonition tip">
<p class="admonition-title">TL; DR</p>
<p>If you cannot access the cluster due to the out-of-service login node or outside campus without VPN, you can still login the cluster with
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ssh<span class="w"> </span>-p<span class="w"> </span>PORT<span class="w"> </span>YOUR_USERNAME@MY_BRIDGE
</code></pre></div>
If you are interested, please contact me for <code>PORT</code> and <code>MY_BRIDGE</code>. <a href="https://user-images.githubusercontent.com/13688320/173276412-22efccd3-28d4-4251-9b23-6704179d4742.jpg"><strong>Buy me a coffee</strong></a> if it is useful.</p>
</div>
<p>Usually, only the login node is out of service, but the jobs on computing nodes would not be affected. So there is a way to bypass the unaccessible login node. It also works when you are outside campus without VPN. Briefly, we can construct a tunnel (bridge) from you laptop to the cluster server via a middle machine.</p>
<p>If you want to use my established bridge (tunnel), the above &ldquo;TL; DR&rdquo; is enough, but you need to fulfill the following requirements.</p>
<div class="admonition warning">
<p class="admonition-title">Requirements for Using My Bridge (Tunnel)</p>
<p>You should have configured SSH key pair for passwordless login. And if you are using PuTTY, make sure your SSH key is in the standard OpenSSH format instead of PuTTY&rsquo;s style, otherwise it will throw the &ldquo;invalid key&rdquo; error. You can convert PuTTY&rsquo;s format in PuTTYgen, see <a href="https://www.simplified.guide/putty/convert-ppk-to-ssh-key"><img alt="🔗" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f517.svg" title=":link:" /></a> for more details.</p>
</div>
<p>If you want to establish a tunnel by yourself, here are the detailed mechanism.</p>
<div class="admonition warning">
<p class="admonition-title">Requirements for Self-established Tunnel</p>
<p>You can access another <strong>middle machine</strong> which has a public or campus IP. Otherwise, you can try to use free tools like <code>ngrok</code> to generate a public ip for your local machine, see <a href="../../Internet/sci-int/#ngrok">my notes on how to access the intranet from outside</a>.</p>
</div>
<ul>
<li>Step 1: ssh to the middle machine from nodes except the login node of ITSC cluster, say <code>sandbox</code>, with the remote port forwarding option <code>-R PORT:localhost:22</code></li>
<li>Step 2: ssh back to <code>sandbox</code> by specifying the port <code>-p PORT</code></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Sometimes ssh session might be disconnected if no further actions, so it would be necessary to replace <code>ssh</code> with <a href="../../Internet/#autossh"><code>autossh</code> (see my notes)</a></p>
</div>
<p>The sketch plot is as follows,</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/13688320/126862431-67358586-1f7b-410f-bafe-e3941bc71d40.png" /></p>
<p>It is necessary to check the status of the tunnel. If the connection is broken, such as the sandbox has rebooted, pop a message window to remind to re-establish the tunnel in time.</p>
<p>The command to pop message is <code>notify-send</code>, and note that a successful command exits with 0, use the script to check the status of ssh connection,</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
ssh<span class="w"> </span>-t<span class="w"> </span><span class="nv">$2</span><span class="w"> </span>ssh<span class="w"> </span>-q<span class="w"> </span>-o<span class="w"> </span><span class="nv">BatchMode</span><span class="o">=</span>yes<span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="nb">exit</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1">#echo &quot;broken connection&quot;</span>
<span class="w">    </span>notify-send<span class="w"> </span>-i<span class="w"> </span>/home/weiya/.local/share/icons/unlink-solid.svg<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;broken connection&quot;</span>
<span class="k">fi</span>
</code></pre></div>
<p>Create a regular job as follows,</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>crontab<span class="w"> </span>-e
<span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span>/run/user/<span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>host<span class="w"> </span><span class="k">in</span><span class="w"> </span>sandbox<span class="w"> </span>STAPC<span class="w"> </span>ROCKY<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>sh<span class="w"> </span>/home/weiya/github/techNotes/docs/Linux/check_ssh.sh<span class="w"> </span><span class="nv">$host</span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
</code></pre></div>
<p>where <code>export XDG_RUNTIME_DIR=/run/user/$(id -u)</code> is necessary for <code>notify-send</code> to pop a window (refer to <a href="https://askubuntu.com/a/1098206">Notify-send doesn&rsquo;t work from crontab</a>)</p>
<h2 id="custom-commands">Custom Commands<a class="headerlink" href="#custom-commands" title="Permanent link">&para;</a></h2>
<p>Some of the commands would be explained in the following sections.</p>
<ul>
<li>aliases</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># delete all jobs</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">qdelall</span><span class="o">=</span><span class="s1">&#39;qstat | while read -a ADDR; do if [[ ${ADDR[0]} == +([0-9]) ]]; then qdel ${ADDR[0]}; fi ; done&#39;</span>
<span class="c1"># list available cores</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">sinfostat</span><span class="o">=</span><span class="s1">&#39;sinfo -o &quot;%N %C&quot; -p stat -N&#39;</span>
<span class="c1"># list available gpu</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">sinfogpu</span><span class="o">=</span><span class="s1">&#39;sinfo -O PartitionName,NodeList,Gres:25,GresUsed:25 | sed -n &quot;1p;/gpu[^:]/p&quot;&#39;</span>
<span class="c1"># check disk quota</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">myquota</span><span class="o">=</span><span class="s1">&#39;for i in `whoami` Stat StatScratch; do lfs quota -gh $i /lustre; done&#39;</span>
<span class="c1"># list jobs sorted by priority</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">sacctchpc</span><span class="o">=</span><span class="s1">&#39;sacct -a -X --format=Priority,User%20,JobID,Account,AllocCPUS,AllocTRES,NNodes,NodeList,Submit,QOS | (sed -u 2q; sort -rn)&#39;</span>
<span class="c1"># list jobs sorted by priority (only involved stat)</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">sacctstat</span><span class="o">=</span><span class="s1">&#39;sacct -a -X --format=Priority,User%20,JobID,Account,AllocCPUS,AllocTRES,NNodes,NodeList,Submit,QOS | (sed -u 2q; sort -rn) | sed -n &quot;1,2p;/stat/p&quot;&#39;</span>
</code></pre></div>
<ul>
<li>functions </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">#request specified nodes in interactive mode</span>
request_cn<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>srun<span class="w"> </span>-p<span class="w"> </span>stat<span class="w"> </span>-q<span class="w"> </span>stat<span class="w"> </span>-w<span class="w"> </span>chpc-cn1<span class="nv">$1</span><span class="w"> </span>--pty<span class="w"> </span>bash<span class="w"> </span>-i<span class="p">;</span><span class="w"> </span><span class="o">}</span>
request_gpu<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>srun<span class="w"> </span>-p<span class="w"> </span>stat<span class="w"> </span>-q<span class="w"> </span>stat<span class="w"> </span>--gres<span class="o">=</span>gpu:1<span class="w"> </span>-w<span class="w"> </span>chpc-gpu01<span class="nv">$1</span><span class="w"> </span>--pty<span class="w"> </span>bash<span class="w"> </span>-i<span class="p">;</span><span class="w"> </span><span class="o">}</span>
request_gpu_chpc<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>srun<span class="w"> </span>-p<span class="w"> </span>chpc<span class="w"> </span>--gres<span class="o">=</span>gpu:1<span class="w"> </span>-w<span class="w"> </span>chpc-gpu<span class="nv">$1</span><span class="w"> </span>--pty<span class="w"> </span>bash<span class="w"> </span>-i<span class="p">;</span><span class="w"> </span><span class="o">}</span>
t<span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>tmux<span class="w"> </span>a<span class="w"> </span>-t<span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>tmux<span class="w"> </span>new<span class="w"> </span>-s<span class="w"> </span><span class="nv">$1</span><span class="p">;</span><span class="w"> </span><span class="o">}</span>
</code></pre></div>
<h2 id="interactive-mode">Interactive Mode<a class="headerlink" href="#interactive-mode" title="Permanent link">&para;</a></h2>
<p>Strongly recommend the interactive mode when you debug your program or want to check the outputs of each step.</p>
<h3 id="qsub-i"><code>qsub -I</code><a class="headerlink" href="#qsub-i" title="Permanent link">&para;</a></h3>
<p>The simplest way is</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>sXXXX@chpc-login01<span class="w"> </span>~<span class="o">]</span><span class="w"> </span>$<span class="w"> </span>qsub<span class="w"> </span>-I
</code></pre></div>
<p>If there are idle nodes, then you would be allocated to a node, and pay attention to the prompt, which indicates where you are. For example, <code>sXXXX@chpc-login01</code> means you are on the <code>chpc-login01</code> node.</p>
<p>Sometimes you can be automatically brought into the target node, then you are done. But sometimes it just displays the node you are allocated, such as</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>sXXXX@chpc-login01<span class="w"> </span>~<span class="o">]</span><span class="w"> </span>$<span class="w"> </span>qsub<span class="w"> </span>-I
...
salloc:<span class="w"> </span>Nodes<span class="w"> </span>chpc-cn011<span class="w"> </span>are<span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>job
<span class="o">[</span>sXXXX@chpc-login01<span class="w"> </span>~<span class="o">]</span><span class="w"> </span>$
</code></pre></div>
<p>then you need to manually ssh into the target node</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>sXXXX@chpc-login01<span class="w"> </span>~<span class="o">]</span><span class="w"> </span>$<span class="w"> </span>ssh<span class="w"> </span>chpc-cn101
<span class="o">[</span>sXXXX@chpc-cn101<span class="w"> </span>~<span class="o">]</span><span class="w"> </span>$
</code></pre></div>
<h3 id="srun-w"><code>srun -w</code><a class="headerlink" href="#srun-w" title="Permanent link">&para;</a></h3>
<p>Sometimes you might want to use a specified node, say you want to use GPU (DO NOT forget <code>--gres=gpu:1</code>), then you can specify your node via the option <code>-w</code>. Moreover, you&rsquo;d better specify the partition and QoS policy <code>-p stat -q stat</code>, which counts your quota of usage. The interactive command is specified via <code>--pty bash -i</code>.</p>
<p>The complete command is</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>sxxxxx@chpc-login01<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>srun<span class="w"> </span>-p<span class="w"> </span>stat<span class="w"> </span>-q<span class="w"> </span>stat<span class="w"> </span>--gres<span class="o">=</span>gpu:1<span class="w"> </span>-w<span class="w"> </span>chpc-gpu010<span class="w"> </span>--pty<span class="w"> </span>bash<span class="w"> </span>-i
srun:<span class="w"> </span>job<span class="w"> </span>XXXXXX<span class="w"> </span>queued<span class="w"> </span>and<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>resources
srun:<span class="w"> </span>error:<span class="w"> </span>Lookup<span class="w"> </span>failed:<span class="w"> </span>Unknown<span class="w"> </span>host
srun:<span class="w"> </span>job<span class="w"> </span>XXXXXX<span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>allocated<span class="w"> </span>resources
<span class="o">[</span>sxxxxx@chpc-gpu010<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>
</code></pre></div>
<p>Upon you are allocated a node, you can do what you want just like on your own laptop.</p>
<h2 id="submitting-multiple-jobs">Submitting Multiple Jobs<a class="headerlink" href="#submitting-multiple-jobs" title="Permanent link">&para;</a></h2>
<p><a href="https://www.cuhk.edu.hk/itsc/hpc/slurm.html">SLURM</a> and PBS are two different cluster schedulers, and the common equivalent commands are as follows:</p>
<p><div class="highlight"><pre><span></span><code><span class="c1"># PBS</span>
qsub<span class="w"> </span>-l<span class="w"> </span><span class="nv">nodes</span><span class="o">=</span><span class="m">2</span>:ppn<span class="o">=</span><span class="m">16</span><span class="w"> </span>-l<span class="w"> </span><span class="nv">mem</span><span class="o">=</span>8g<span class="w"> </span>-N<span class="w"> </span>jobname<span class="w"> </span>-m<span class="w"> </span>be<span class="w"> </span>-M<span class="w"> </span>notify@cuhk.edu.hk
<span class="c1"># Slurm</span>
sbatch<span class="w"> </span>-N<span class="w"> </span><span class="m">2</span><span class="w"> </span>-c<span class="w"> </span><span class="m">16</span><span class="w"> </span>--mem<span class="o">=</span>8g<span class="w"> </span>-J<span class="w"> </span>jobname<span class="w"> </span>--mail-type<span class="o">=[</span>BEGIN,END,FAIL,REQUEUE,ALL<span class="o">]</span><span class="w"> </span>--mail-user<span class="o">=</span>notify@cuhk.edu.hk
</code></pre></div>
Sometimes, we want to submit multiple jobs quickly, or perform parallel computing by dividing a heavy task into multiple small tasks.</p>
<h3 id="pbs">PBS<a class="headerlink" href="#pbs" title="Permanent link">&para;</a></h3>
<p>Suppose there is a main program <code>toy.jl</code>, and I want to run it multiple times but with different parameters, which can be passed via the <code>-v</code> option.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">submit.sh</label><label for="__tabbed_2_2">toy.job</label><label for="__tabbed_2_3">toy.jl</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="k">for</span><span class="w"> </span>number<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>letter<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>b<span class="w"> </span>c<span class="w"> </span>d<span class="w"> </span>e<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span>qsub<span class="w"> </span>-v<span class="w"> </span><span class="nv">arg1</span><span class="o">=</span><span class="nv">$number</span>,arg2<span class="o">=</span><span class="nv">$letter</span><span class="w"> </span>toy.job
<span class="w">    </span><span class="k">done</span>
<span class="k">done</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/PROJECT_FOLDER
julia<span class="w"> </span>toy.jl<span class="w"> </span><span class="si">${</span><span class="nv">arg1</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">arg2</span><span class="si">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AGRS</span>
<span class="n">println</span><span class="p">(</span><span class="s">&quot;a = </span><span class="si">$a</span><span class="s">, b = </span><span class="si">$b</span><span class="s">&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<p>The submitting command is</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./submit.sh
</code></pre></div>
<p>and here is <a href="https://github.com/szcf-weiya/Metabolic-Network/blob/09314f0558ddccc3997bcfcecf6b7576b281c3fd/old/mcmc-with-args.job">an example</a> in my private projects.</p>
<h3 id="slurm">SLURM<a class="headerlink" href="#slurm" title="Permanent link">&para;</a></h3>
<p>Suppose there is a main program <code>run.jl</code>, which runs in parallel with the number of cores <code>np</code>, and I also want to repeat the program for <code>N</code> times. To properly store the results, the index of repetition <code>nrep</code> for each job has been passed to the main program.</p>
<p>The arguments for job file can be passed by the <code>--export</code> option.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">submit.sh</label><label for="__tabbed_3_2">toy.job</label><label for="__tabbed_3_3">run.jl</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>cat<span class="w"> </span><span class="s">&lt;&lt;HELP_USAGE</span>
<span class="s">    $0 param1 param2</span>
<span class="s">    param1 number of repetitions</span>
<span class="s">    param2 node label, can be stat or chpc</span>
<span class="s">    param3 number of cores</span>
<span class="s">HELP_USAGE</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">0</span>
<span class="k">fi</span>
<span class="nv">resfolder</span><span class="o">=</span>res_<span class="k">$(</span>date<span class="w"> </span>-Iseconds<span class="k">)</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>seq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">$1</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span>sbatch<span class="w"> </span>-N<span class="w"> </span><span class="m">1</span><span class="w"> </span>-c<span class="w"> </span><span class="nv">$3</span><span class="w"> </span>-p<span class="w"> </span><span class="nv">$2</span><span class="w"> </span>--export<span class="o">=</span><span class="nv">resfolder</span><span class="o">=</span><span class="si">${</span><span class="nv">resfolder</span><span class="si">}</span>,nrep<span class="o">=</span><span class="si">${</span><span class="nv">i</span><span class="si">}</span>,np<span class="o">=</span><span class="nv">$3</span><span class="w"> </span>toy.job
<span class="k">done</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/PROJECT
julia<span class="w"> </span>-p<span class="w"> </span><span class="nv">$np</span><span class="w"> </span>run.jl<span class="w"> </span><span class="nv">$nrep</span><span class="w"> </span><span class="nv">$resfolder</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">Distributed</span>
<span class="k">const</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RemoteChannel</span><span class="p">(()</span><span class="o">-&gt;</span><span class="kt">Channel</span><span class="p">{</span><span class="kt">Tuple</span><span class="p">}(</span><span class="mi">32</span><span class="p">))</span>
<span class="k">const</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RemoteChannel</span><span class="p">(()</span><span class="o">-&gt;</span><span class="kt">Channel</span><span class="p">{</span><span class="kt">Tuple</span><span class="p">}(</span><span class="mi">32</span><span class="p">))</span>

<span class="k">function</span><span class="w"> </span><span class="n">make_jobs</span><span class="p">()</span><span class="w"> </span><span class="k">end</span>
<span class="k">function</span><span class="w"> </span><span class="n">do_work</span><span class="p">()</span><span class="w"> </span><span class="k">end</span>

<span class="n">nrep</span><span class="p">,</span><span class="w"> </span><span class="n">resfolder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ARGS</span>
<span class="nd">@async</span><span class="w"> </span><span class="n">make_jobs</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<p>where</p>
<ul>
<li><a href="https://stackoverflow.com/questions/687780/documenting-shell-scripts-parameters"><code>HELP_USAGE</code></a> documents shell scripts&rsquo; parameters.</li>
<li><code>$1, $2, $3</code> denotes the 1st, 2nd, 3rd argument in the command line, and <code>$0</code> is the script name.</li>
</ul>
<p>The following command runs with <code>N = 100, np = 4</code> and on the <code>stat</code> partition,</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>./submit.sh<span class="w"> </span><span class="m">100</span><span class="w"> </span>stat<span class="w"> </span><span class="m">4</span>
</code></pre></div>
<p>which is adopted from <a href="https://github.com/szcf-weiya/Cell-Video/blob/master/DP/parallel_oracle2.sh">my private project</a>.</p>
<h2 id="specify-nodes">Specify Nodes<a class="headerlink" href="#specify-nodes" title="Permanent link">&para;</a></h2>
<p>The nodes can be excluded with <code>-x</code> or <code>--exclude</code>, and it can be specified with <code>-w</code>.</p>
<div class="admonition tip">
<p class="admonition-title">TL; DR</p>
<p>According to the following experiments, my observation is that</p>
<blockquote>
<p>the exclusion seems only to perform on the granted resources instead of all nodes. If you want to allocate specified nodes, <code>-w</code> option should be used.</p>
</blockquote>
</div>
<ul>
<li><code>srun</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># cannot exclude</span>
$<span class="w"> </span>srun<span class="w"> </span>-x<span class="w"> </span>chpc-cn050<span class="w"> </span>hostname
chpc-cn050.rc.cuhk.edu.hk
</code></pre></div>
<ul>
<li><code>salloc</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># cannot exclude</span>
$<span class="w"> </span>salloc<span class="w"> </span>-x<span class="w"> </span>chpc-cn050<span class="w"> </span>-N1
salloc:<span class="w"> </span>Nodes<span class="w"> </span>chpc-cn050<span class="w"> </span>are<span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>job
<span class="c1"># cannot exclude</span>
$<span class="w"> </span>salloc<span class="w"> </span>-x<span class="w"> </span>chpc-cn050<span class="w"> </span>srun<span class="w"> </span>hostname
salloc:<span class="w"> </span>Nodes<span class="w"> </span>chpc-cn050<span class="w"> </span>are<span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>job
chpc-cn050.rc.cuhk.edu.hk
<span class="c1"># NB: exclude successfully</span>
$<span class="w"> </span>salloc<span class="w"> </span>-w<span class="w"> </span>chpc-cn050<span class="w"> </span>srun<span class="w"> </span>-x<span class="w"> </span>chpc-cn050<span class="w"> </span>hostname
salloc:<span class="w"> </span>Nodes<span class="w"> </span>chpc-cn050<span class="w"> </span>are<span class="w"> </span>ready<span class="w"> </span><span class="k">for</span><span class="w"> </span>job
srun:<span class="w"> </span>error:<span class="w"> </span>Hostlist<span class="w"> </span>is<span class="w"> </span>empty!<span class="w">  </span>Can<span class="err">&#39;</span>t<span class="w"> </span>run<span class="w"> </span>job.
</code></pre></div>
<ul>
<li><code>sbatch</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># cannot exclude</span>
$<span class="w"> </span>sbatch<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">&gt; #!/bin/sh</span>
<span class="s">&gt; #SBATCH -x chpc-cn050</span>
<span class="s">&gt; srun hostname</span>
<span class="s">&gt; EOF</span>
Submitted<span class="w"> </span>batch<span class="w"> </span>job<span class="w"> </span><span class="m">246669</span>
$<span class="w"> </span>cat<span class="w"> </span>slurm-246669.out
chpc-cn050.rc.cuhk.edu.hk

<span class="c1"># NB: exclude successfully</span>
$<span class="w"> </span>sbatch<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">&gt; #!/bin/sh</span>
<span class="s">&gt; #SBATCH -w chpc-cn050</span>
<span class="s">&gt; srun -x chpc-cn050 hostname</span>
<span class="s">&gt; EOF</span>
Submitted<span class="w"> </span>batch<span class="w"> </span>job<span class="w"> </span><span class="m">246682</span>
$<span class="w"> </span>cat<span class="w"> </span>slurm-246682.out
srun:<span class="w"> </span>error:<span class="w"> </span>Hostlist<span class="w"> </span>is<span class="w"> </span>empty!<span class="w">  </span>Can<span class="err">&#39;</span>t<span class="w"> </span>run<span class="w"> </span>job.
</code></pre></div>
<p><strong>Observation:</strong></p>
<p><code>-x</code> seems not to work in the allocation step, but it can exclude nodes from the allocated nodes.</p>
<p>Back to the manual of <code>-x</code> option:</p>
<blockquote>
<p>Explicitly exclude certain nodes from the resources <strong>granted</strong> to the job.</p>
</blockquote>
<p>So the exclusion seems only to perform on the granted resources instead of all nodes. If you want to allocate specified nodes, <code>-w</code> option should be used.</p>
<h2 id="exit-code">Exit Code<a class="headerlink" href="#exit-code" title="Permanent link">&para;</a></h2>
<p>As the <a href="https://slurm.schedmd.com/job_exit_code.html">official documentation</a> said, a job&rsquo;s exit code (aka exit status, return code and completion code) is captured by Slurm and saved as part of the job record. For sbatch jobs, the exit code that is captured is the output of the batch script.</p>
<ul>
<li>Any non-zero exit code will be assumed to be a job failure and will result in a Job State of FAILED with a Reason of &ldquo;NonZeroExitCode&rdquo;.</li>
<li>The exit code is an 8 bit unsigned number ranging between 0 and 255.</li>
<li><strong>When a signal was responsible for a job or step&rsquo;s termination, the signal number will be displayed after the exit code, delineated by a colon(:)</strong></li>
</ul>
<p>We can check the exit code of particular jobs,</p>
<div class="highlight"><pre><span></span><code>sacct<span class="w"> </span>-a<span class="w"> </span>-X<span class="w"> </span>--format<span class="o">=</span>Priority,User%20,JobID,Account,AllocCPUS,AllocTRES,NNodes,NodeList,Submit,QOS,STATE,ExitCode,DerivedExitCode
</code></pre></div>
<p>e.g.,</p>
<p><img alt="" src="https://user-images.githubusercontent.com/13688320/130934797-f6908044-d583-459e-b3ea-09df362f442c.png" /></p>
<p>where </p>
<ul>
<li>the first one is a toy example and kill by myself with <code>kill -s 9 XX</code>, so the right of <code>:</code> is signal <code>9</code>, and it exits with zero code</li>
<li>the second one is the one shared by <a href="https://github.com/songfd2018">@fangda</a>. It is exactly reversed, and I suspect that it might be due to other reasons.</li>
</ul>
<p>see also: <a href="https://www.gnu.org/software/bash/manual/html_node/Signals.html">3.7.6 Signals</a> and </p>
<div class="highlight"><pre><span></span><code><span class="c1"># http://www.bu.edu/tech/files/text/batchcode.txt</span>
Name<span class="w">     </span>Number<span class="w"> </span><span class="o">(</span>SGI<span class="o">)</span><span class="w">   </span>Number<span class="w"> </span><span class="o">(</span>IBM<span class="o">)</span>
SIGHUP<span class="w">      </span><span class="m">1</span><span class="w">              </span><span class="m">1</span>
SIGINT<span class="w">      </span><span class="m">2</span><span class="w">              </span><span class="m">2</span>
SIGQUIT<span class="w">     </span><span class="m">3</span><span class="w">              </span><span class="m">3</span>
SIGILL<span class="w">      </span><span class="m">4</span><span class="w">              </span><span class="m">4</span>
SIGTRAP<span class="w">     </span><span class="m">5</span><span class="w">              </span><span class="m">5</span>
SIGABRT<span class="w">     </span><span class="m">6</span><span class="w">              </span><span class="m">6</span>
SIGEMT<span class="w">      </span><span class="m">7</span><span class="w">              </span><span class="m">7</span>
SIGFPE<span class="w">      </span><span class="m">8</span><span class="w">              </span><span class="m">8</span>
SIGKILL<span class="w">     </span><span class="m">9</span><span class="w">              </span><span class="m">9</span>
SIGBUS<span class="w">      </span><span class="m">10</span><span class="w">             </span><span class="m">10</span>
SIGSEGV<span class="w">     </span><span class="m">11</span><span class="w">             </span><span class="m">11</span>
SIGSYS<span class="w">      </span><span class="m">12</span><span class="w">             </span><span class="m">12</span>
SIGPIPE<span class="w">     </span><span class="m">13</span><span class="w">             </span><span class="m">13</span>
SIGALRM<span class="w">     </span><span class="m">14</span><span class="w">             </span><span class="m">14</span>
SIGTERM<span class="w">     </span><span class="m">15</span><span class="w">             </span><span class="m">15</span>
SIGUSR1<span class="w">     </span><span class="m">16</span><span class="w">             </span><span class="m">30</span>
SIGUSR2<span class="w">     </span><span class="m">17</span><span class="w">             </span><span class="m">31</span>
SIGPOLL<span class="w">     </span><span class="m">22</span><span class="w">             </span><span class="m">23</span>
SIGIO<span class="w">       </span><span class="m">22</span><span class="w">             </span><span class="m">23</span>
SIGVTALRM<span class="w">   </span><span class="m">28</span><span class="w">             </span><span class="m">34</span>
SIGPROF<span class="w">     </span><span class="m">29</span><span class="w">             </span><span class="m">32</span>
SIGXCPU<span class="w">     </span><span class="m">30</span><span class="w">             </span><span class="m">24</span>
SIGXFSZ<span class="w">     </span><span class="m">31</span><span class="w">             </span><span class="m">25</span>
SIGRTMIN<span class="w">    </span><span class="m">49</span><span class="w">             </span><span class="m">888</span>
SIGRTMAX<span class="w">    </span><span class="m">64</span><span class="w">             </span><span class="m">999</span>
</code></pre></div>
<h2 id="job-priority">Job Priority<a class="headerlink" href="#job-priority" title="Permanent link">&para;</a></h2>
<p>The submitted jobs are sorted by the calculated job priority in descending order. </p>
<div class="admonition tip">
<p class="admonition-title">TL;DR</p>
<p>You can check the priority of all submitted jobs (not only yours but also others), and then you can find where you are, and figure out when your job can start to run.
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sacct<span class="w"> </span>-a<span class="w"> </span>-X<span class="w"> </span>--format<span class="o">=</span>Priority,User%20,JobID,Account,AllocCPUS,AllocTRES,NNodes,NodeList,Submit,QOS<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="o">(</span>sed<span class="w"> </span>-u<span class="w"> </span>2q<span class="p">;</span><span class="w"> </span>sort<span class="w"> </span>-rn<span class="o">)</span>
</code></pre></div></p>
</div>
<p>The formula for job priority is given by</p>
<div class="highlight"><pre><span></span><code><span class="nv">Job_priority</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span>site_factor<span class="w"> </span>+
<span class="w">    </span><span class="o">(</span>PriorityWeightAge<span class="o">)</span><span class="w"> </span>*<span class="w"> </span><span class="o">(</span>age_factor<span class="o">)</span><span class="w"> </span>+
<span class="w">    </span><span class="o">(</span>PriorityWeightAssoc<span class="o">)</span><span class="w"> </span>*<span class="w"> </span><span class="o">(</span>assoc_factor<span class="o">)</span><span class="w"> </span>+
<span class="w">    </span><span class="o">(</span>PriorityWeightFairshare<span class="o">)</span><span class="w"> </span>*<span class="w"> </span><span class="o">(</span>fair-share_factor<span class="o">)</span><span class="w"> </span>+
<span class="w">    </span><span class="o">(</span>PriorityWeightJobSize<span class="o">)</span><span class="w"> </span>*<span class="w"> </span><span class="o">(</span>job_size_factor<span class="o">)</span><span class="w"> </span>+
<span class="w">    </span><span class="o">(</span>PriorityWeightPartition<span class="o">)</span><span class="w"> </span>*<span class="w"> </span><span class="o">(</span>partition_factor<span class="o">)</span><span class="w"> </span>+
<span class="w">    </span><span class="o">(</span>PriorityWeightQOS<span class="o">)</span><span class="w"> </span>*<span class="w"> </span><span class="o">(</span>QOS_factor<span class="o">)</span><span class="w"> </span>+
<span class="w">    </span>SUM<span class="o">(</span>TRES_weight_cpu<span class="w"> </span>*<span class="w"> </span>TRES_factor_cpu,
<span class="w">        </span>TRES_weight_&lt;type&gt;<span class="w"> </span>*<span class="w"> </span>TRES_factor_&lt;type&gt;,
<span class="w">        </span>...<span class="o">)</span>
<span class="w">    </span>-<span class="w"> </span>nice_factor
</code></pre></div>
<p>we can find those weights</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>scontrol<span class="w"> </span>show<span class="w"> </span>config<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>^Priority
<span class="nv">PriorityParameters</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>null<span class="o">)</span>
<span class="nv">PrioritySiteFactorParameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>null<span class="o">)</span>
<span class="nv">PrioritySiteFactorPlugin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>null<span class="o">)</span>
<span class="nv">PriorityDecayHalfLife</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>-00:00:00
<span class="nv">PriorityCalcPeriod</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="m">00</span>:05:00
<span class="nv">PriorityFavorSmall</span><span class="w">      </span><span class="o">=</span><span class="w"> </span>No
<span class="nv">PriorityFlags</span><span class="w">           </span><span class="o">=</span><span class="w"> </span>CALCULATE_RUNNING
<span class="nv">PriorityMaxAge</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>-00:00:00
<span class="nv">PriorityUsageResetPeriod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>NONE
<span class="nv">PriorityType</span><span class="w">            </span><span class="o">=</span><span class="w"> </span>priority/multifactor
<span class="nv">PriorityWeightAge</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">PriorityWeightAssoc</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">PriorityWeightFairShare</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100000</span>
<span class="nv">PriorityWeightJobSize</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">PriorityWeightPartition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">PriorityWeightQOS</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="nv">PriorityWeightTRES</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="o">(</span>null<span class="o">)</span>
</code></pre></div>
<p>only the <code>PriorityWeightFairShare</code> is nonzero, and this agrees with</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sprio<span class="w"> </span>-w
<span class="w">          </span>JOBID<span class="w"> </span>PARTITION<span class="w">   </span>PRIORITY<span class="w">       </span>SITE<span class="w">  </span>FAIRSHARE
<span class="w">        </span>Weights<span class="w">                               </span><span class="m">1</span><span class="w">     </span><span class="m">100000</span>
$<span class="w"> </span>sprio<span class="w"> </span>-w<span class="w"> </span>-p<span class="w"> </span>stat
<span class="w">          </span>JOBID<span class="w"> </span>PARTITION<span class="w">   </span>PRIORITY<span class="w">       </span>SITE<span class="w">  </span>FAIRSHARE
<span class="w">        </span>Weights<span class="w">                               </span><span class="m">1</span><span class="w">     </span><span class="m">100000</span>
$<span class="w"> </span>sprio<span class="w"> </span>-w<span class="w"> </span>-p<span class="w"> </span>chpc
<span class="w">          </span>JOBID<span class="w"> </span>PARTITION<span class="w">   </span>PRIORITY<span class="w">       </span>SITE<span class="w">  </span>FAIRSHARE
<span class="w">        </span>Weights<span class="w">                               </span><span class="m">1</span><span class="w">     </span><span class="m">100000</span>
</code></pre></div>
<p>then the formula would be simplified as</p>
<div class="highlight"><pre><span></span><code><span class="nv">Job_priority</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span>site_factor<span class="w"> </span>+
<span class="w">    </span><span class="o">(</span>PriorityWeightFairshare<span class="o">)</span><span class="w"> </span>*<span class="w"> </span><span class="o">(</span>fair-share_factor<span class="o">)</span><span class="w"> </span>+
<span class="w">    </span>SUM<span class="o">(</span>TRES_weight_cpu<span class="w"> </span>*<span class="w"> </span>TRES_factor_cpu,
<span class="w">        </span>TRES_weight_&lt;type&gt;<span class="w"> </span>*<span class="w"> </span>TRES_factor_&lt;type&gt;,
<span class="w">        </span>...<span class="o">)</span>
<span class="w">    </span>-<span class="w"> </span>nice_factor
</code></pre></div>
<p>where <code>TRES_weight_&lt;type&gt;</code> might be GPU, see the usage weight in the <a href="https://www.cuhk.edu.hk/itsc/hpc/slurm.html">table</a>, and a negative <code>nice_factor</code> can only be set by privileged users,</p>
<blockquote>
<p>Nice Factor</p>
</blockquote>
<p>Users can adjust the priority of their own jobs by setting the nice value on their jobs. Like the system nice, positive values negatively impact a job&rsquo;s priority and negative values increase a job&rsquo;s priority. Only privileged users can specify a negative value. The adjustment range is +/-2147483645.</p>
<ul>
<li>the fairshare can be obtained via <code>sshare</code>, and the calculated priority can be obtained via <code>sprio</code>.</li>
</ul>
<p>refer to</p>
<ul>
<li><a href="https://slurm.schedmd.com/priority_multifactor.html">Multifactor Priority Plugin</a></li>
<li><a href="http://www.ceci-hpc.be/slurm_prio.html">Slurm priorities</a></li>
</ul>
<h2 id="qos">QOS<a class="headerlink" href="#qos" title="Permanent link">&para;</a></h2>
<p>In practice, we are always told that the maximum number of CPUs/cores and Jobs, which can be specified by QOS. Recall that we are suggested to specify <code>-q stat</code> when we submit jobs. Without such option, it uses the default one <code>-q normal</code>. Actually, they corresponds to two different Quality of Service (QOS), i.e., two different quotas.</p>
<p>For example, in the below configuration, when we use <code>-p stat -q stat</code>, the maximum number of jobs and cpus are limited to be 30. But if we just specify <code>-p stat</code>, the submitted jobs would be counted into <code>-p normal</code> whose limitation is only 10. (see <a href="https://github.com/szcf-weiya/techNotes/issues/7"><img alt="🔗" class="twemoji" src="https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/1f517.svg" title=":link:" /></a> for my exploration)</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sacctmgr<span class="w"> </span>show<span class="w"> </span>qos<span class="w"> </span><span class="nv">format</span><span class="o">=</span>name,MaxJobsPU,MaxSubmitPU,MaxTRESPU
<span class="w">      </span>Name<span class="w"> </span>MaxJobsPU<span class="w"> </span>MaxSubmitPU<span class="w">     </span>MaxTRESPU<span class="w"> </span>
----------<span class="w"> </span>---------<span class="w"> </span>-----------<span class="w"> </span>-------------<span class="w"> </span>
<span class="w">    </span>normal<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
<span class="w">      </span>stat<span class="w">                    </span><span class="m">30</span><span class="w">        </span><span class="nv">cpu</span><span class="o">=</span><span class="m">30</span><span class="w"> </span>
<span class="w">    </span>20jobs<span class="w">                    </span><span class="m">20</span><span class="w">               </span>
<span class="w">        </span>p1<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
<span class="w">        </span>p2<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
<span class="w">        </span>p3<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
<span class="w">      </span>hold<span class="w">         </span><span class="m">0</span><span class="w">          </span><span class="m">10</span><span class="w">               </span>
<span class="w">    </span>tfchan<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
<span class="w">      </span>bull<span class="w">                    </span><span class="m">50</span><span class="w">               </span>
<span class="w">      </span>ligo<span class="w">                   </span><span class="m">100</span><span class="w">               </span>
<span class="w">      </span>demo<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
yingyingw+<span class="w">                    </span><span class="m">30</span><span class="w">        </span><span class="nv">cpu</span><span class="o">=</span><span class="m">30</span><span class="w"> </span>
<span class="w">     </span>bzhou<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
<span class="w">       </span>geo<span class="w">                    </span><span class="m">10</span><span class="w">               </span>
<span class="w">     </span>cstat<span class="w">                              </span><span class="nv">cpu</span><span class="o">=</span><span class="m">16</span><span class="w"> </span>
</code></pre></div>
<p>Furthermore, the QOS configuration is defined in </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>/etc/slurm/slurm.conf<span class="w"> </span>
...
<span class="c1"># Partition</span>
<span class="nv">PartitionName</span><span class="o">=</span>chpc<span class="w"> </span><span class="nv">Nodes</span><span class="o">=</span>chpc-cn<span class="o">[</span><span class="m">002</span>-029,033-040,042-050<span class="o">]</span>,chpc-gpu<span class="o">[</span><span class="m">001</span>-003<span class="o">]</span>,chpc-k80gpu<span class="o">[</span><span class="m">001</span>-002<span class="o">]</span>,chpc-large-mem01,chpc-m192a<span class="o">[</span><span class="m">001</span>-010<span class="o">]</span><span class="w"> </span><span class="nv">Default</span><span class="o">=</span>YES<span class="w"> </span><span class="nv">MaxTime</span><span class="o">=</span><span class="m">7</span>-0<span class="w"> </span><span class="nv">MaxNodes</span><span class="o">=</span><span class="m">16</span><span class="w"> </span><span class="nv">State</span><span class="o">=</span>UP<span class="w"> </span><span class="nv">DenyAccounts</span><span class="o">=</span>public<span class="w"> </span><span class="nv">AllowQos</span><span class="o">=</span>normal,cstat,tfchan,ligo<span class="w"> </span><span class="c1">#DenyQos=stat,bull,demo</span>
<span class="nv">PartitionName</span><span class="o">=</span>public<span class="w"> </span><span class="nv">Nodes</span><span class="o">=</span>chpc-cn<span class="o">[</span><span class="m">005</span>,015,025,035,045<span class="o">]</span>,chpc-gpu001<span class="w"> </span><span class="nv">MaxTime</span><span class="o">=</span><span class="m">7</span>-0<span class="w"> </span><span class="nv">State</span><span class="o">=</span>UP<span class="w"> </span>
<span class="nv">PartitionName</span><span class="o">=</span>stat<span class="w"> </span><span class="nv">Nodes</span><span class="o">=</span>chpc-cn<span class="o">[</span><span class="m">101</span>-110<span class="o">]</span>,chpc-gpu<span class="o">[</span><span class="m">010</span>-014<span class="o">]</span><span class="w"> </span><span class="nv">State</span><span class="o">=</span>UP<span class="w"> </span><span class="nv">AllowAccounts</span><span class="o">=</span>stat<span class="w"> </span><span class="nv">QOS</span><span class="o">=</span>stat
<span class="nv">PartitionName</span><span class="o">=</span>yingyingwei<span class="w"> </span><span class="nv">Nodes</span><span class="o">=</span>chpc-cn111,chpc-gpu015<span class="w"> </span><span class="nv">State</span><span class="o">=</span>UP<span class="w"> </span><span class="nv">AllowGroups</span><span class="o">=</span>yingyingwei<span class="w"> </span><span class="nv">QOS</span><span class="o">=</span>yingyingwei
<span class="nv">PartitionName</span><span class="o">=</span>bzhou<span class="w"> </span><span class="nv">Nodes</span><span class="o">=</span>chpc-gpu<span class="o">[</span><span class="m">004</span>-009<span class="o">]</span><span class="w"> </span><span class="nv">State</span><span class="o">=</span>UP<span class="w"> </span><span class="nv">AllowAccounts</span><span class="o">=</span>boleizhou<span class="w"> </span><span class="nv">QOS</span><span class="o">=</span>bzhou
<span class="nv">PartitionName</span><span class="o">=</span>tjonnie<span class="w"> </span><span class="nv">Nodes</span><span class="o">=</span>chpc-cn<span class="o">[</span><span class="m">030</span>-032,041<span class="o">]</span><span class="w"> </span><span class="nv">State</span><span class="o">=</span>UP<span class="w"> </span><span class="nv">AllowGroups</span><span class="o">=</span>s1155137381<span class="w"> </span><span class="nv">QOS</span><span class="o">=</span>ligo
<span class="c1">#PartitionName=ligo Nodes=chpc-cn050 State=UP AllowAccounts=tjonnieli QOS=ligo</span>
<span class="c1">#PartitionName=demo Nodes=chpc-cn049 State=UP AllowAccounts=pione QOS=demo</span>
<span class="c1">#PartitionName=geo Nodes=chpc-cn048 State=UP AllowGroups=s1155102420 QOS=geo</span>
<span class="nv">PartitionName</span><span class="o">=</span>itsc<span class="w"> </span><span class="nv">Nodes</span><span class="o">=</span>ALL<span class="w"> </span><span class="nv">State</span><span class="o">=</span>UP<span class="w"> </span><span class="nv">AllowAccounts</span><span class="o">=</span>pione<span class="w"> </span><span class="nv">QOS</span><span class="o">=</span>bull<span class="w"> </span><span class="nv">Hidden</span><span class="o">=</span>yes<span class="w"> </span>
</code></pre></div>
<p>so to gain more quota, a possible (might <strong>not friendly</strong> if without notification) way is to try other policy <code>-q</code> on other partition <code>-p</code>. For example, the above <code>cstat</code> does not specify the limitation on the number of submit jobs (<code>MaxJobsPU</code>) and no <code>cstat</code> record (and hence no contraints like <code>AllowAccounts</code> and <code>AllowQos</code>) in the configuration file, so we can submit more than 30 jobs with <code>-q cstat</code>, althought might not be too much since it limits the resource <code>cpu=16</code> in <code>MaxTRESPU</code>. </p>
<h2 id="cpumemory-usage">CPU/Memory Usage<a class="headerlink" href="#cpumemory-usage" title="Permanent link">&para;</a></h2>
<p>Check the CPU and memory usage of a specific job. The natural way is to use <code>top</code> on the node that run the job. After ssh into the corresponding node, get the map between job id and process id via</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>scontrol<span class="w"> </span>listpids<span class="w"> </span>YOUR_JOB_ID
</code></pre></div>
<p>Note that this only works with processes on the node on which <code>scontrol</code> is run, i.e., we cannot get the corresponding pid before ssh into the node.</p>
<p>Then check the results of <code>top</code> and monitor the CPU/memory usage by the job given the pid. Or explicitly specify the pid via <code>top -p PID_OF_JOB</code></p>
<p>Alternatively, a more direct way is to use <code>sstat</code> command, which reports various status information, including CPU and memory, for running jobs.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sstat<span class="w"> </span>--format<span class="o">=</span>AveCPU,AvePages,AveRSS,AveVMSize,MaxRSS,MaxVMSize<span class="w"> </span>-j<span class="w"> </span>JOBID
<span class="w">    </span>AveCPU<span class="w">   </span>AvePages<span class="w">     </span>AveRSS<span class="w">  </span>AveVMSize<span class="w">     </span>MaxRSS<span class="w">  </span>MaxVMSize<span class="w"> </span>
----------<span class="w"> </span>----------<span class="w"> </span>----------<span class="w"> </span>----------<span class="w"> </span>----------<span class="w"> </span>----------<span class="w"> </span>
<span class="w"> </span><span class="m">00</span>:02.000<span class="w">         </span><span class="m">30</span><span class="w">      </span>1828K<span class="w">    </span>119820K<span class="w">      </span>1828K<span class="w">    </span>276808K<span class="w"> </span>
</code></pre></div>
<p>Correspondingly, the result from <code>top</code> is</p>
<div class="highlight"><pre><span></span><code>PID<span class="w"> </span>USER<span class="w"> </span>PR<span class="w">  </span>NI<span class="w">    </span>VIRT<span class="w">    </span>RES<span class="w">    </span>SHR<span class="w"> </span>S<span class="w">  </span>%CPU<span class="w"> </span>%MEM<span class="w">     </span>TIME<span class="w"> </span>COMMAND<span class="w">                                                                                                              </span>
<span class="m">213435</span><span class="w"> </span>XXX<span class="w"> </span><span class="m">20</span><span class="w">   </span><span class="m">0</span><span class="w">  </span><span class="m">119820</span><span class="w">   </span><span class="m">2388</span><span class="w">   </span><span class="m">1772</span><span class="w"> </span>S<span class="w">   </span><span class="m">0</span>.0<span class="w">  </span><span class="m">0</span>.0<span class="w">   </span><span class="m">0</span>:00.27<span class="w"> </span>bash<span class="w"> </span>
</code></pre></div>
<p>where <code>VIRT</code> == <code>AveVMSIZE</code>. The detailed meaning can be found via <code>man top</code>,</p>
<ul>
<li><code>VIRT</code>: Virtual Memory Size</li>
<li><code>RES</code>: Resident Memory Size</li>
<li><code>%MEM</code>: <code>RES</code> divided by total physical memory</li>
</ul>
<h2 id="disk-quota">Disk Quota<a class="headerlink" href="#disk-quota" title="Permanent link">&para;</a></h2>
<p>Sometimes, you might find that your job cannot continue to write out results, and you also cannot create a new file. It might imply that your quota reaches the limit, and here is a tip to &ldquo;increase&rdquo; your quota without cleaning your files.</p>
<div class="admonition tip">
<p class="admonition-title">TL;DR</p>
<p>Tip to &ldquo;increase&rdquo; your personal quota is to count the files as the shared department quota, so just change the group membership of your files,
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>chgrp<span class="w"> </span>-R<span class="w"> </span>Stat<span class="w"> </span>SomeFolder
</code></pre></div></p>
</div>
<p>Firstly, you can check your personal quota with</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lfs<span class="w"> </span>quota<span class="w"> </span>-gh<span class="w"> </span>your_user_id<span class="w"> </span>/lustre
<span class="c1"># 20GB by default from ITSC in /users/your_user_id</span>
</code></pre></div>
<p>and here is two shared quota&rsquo;s in the whole department,</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>lfs<span class="w"> </span>quota<span class="w"> </span>-gh<span class="w"> </span>Stat<span class="w"> </span>/lustre
<span class="c1"># 30TB shared by Statistics Department in /lustre/project/Stat</span>
$<span class="w"> </span>lfs<span class="w"> </span>quota<span class="w"> </span>-gh<span class="w"> </span>StatScratch<span class="w"> </span>/lustre
<span class="c1"># 10TB by default from ITSC in /lustre/scratch/Stat</span>
</code></pre></div>
<p>An interesting thing is that the quota is counted by the group membership of the file, so if your personal quota exceeds, you can change the group membership of some files, and then these files would count as the shared quota instead of your personal quota. To change the group membership recursively of a folder, </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>chgrp<span class="w"> </span>-R<span class="w"> </span>Stat<span class="w"> </span>SomeFolder
</code></pre></div>
<p>A partial Chinese description,</p>
<p>已经好几次因为 disk quota 超了使得程序崩溃，于是试图将 home 文件夹中的部分文件移动到 <code>/lustre/project/Stat</code> 中，但似乎 quota 并没有变化。</p>
<p>后来才发现，原来 quota 是通过 group 来控制的，其中上述命令中 <code>-g</code> 选项即表示 group，也就是说 <code>your_user_id</code>, <code>Stat</code> 和 <code>StatScratch</code> 都是 group 名字。如果文件夹是从别处移动来的，group并不会改变，只有直接在 <code>/lustre/project/Stat</code> 中新建的文件或文件夹才继承 Stat 的 group，这一点是最开始在 <code>Stat</code> 文件夹下创建自己目录 <code>MYFOLDER</code> 时通过 <code>chmod g+s MYFOLDER</code> 保证的。</p>
<p>于是简单的方法便是直接更改 group，</p>
<div class="highlight"><pre><span></span><code>chgrp<span class="w"> </span>-R<span class="w"> </span>Stat<span class="w"> </span>SomeFolder
</code></pre></div>
<p>如果想找出哪些文件 group 为 <code>sXXXX</code>, 可以采用</p>
<div class="highlight"><pre><span></span><code>find<span class="w"> </span>.<span class="w"> </span>-group<span class="w"> </span><span class="sb">`</span>whoami<span class="sb">`</span>
</code></pre></div>
<h2 id="custom-module">Custom Module<a class="headerlink" href="#custom-module" title="Permanent link">&para;</a></h2>
<p>The cluster manages the software versions with <a href="https://linux.die.net/man/1/module">module</a>, and the default module file path is</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$MODULEPATH</span>
/usr/share/Modules/modulefiles:/etc/modulefiles
</code></pre></div>
<p>which requires <code>sudo</code> privilege. A natural question is whether we can create custom (local) module file to switch the software which are installed by ourselves or have not been added into the modules.</p>
<p>Here is an example. There is an installed R in <code>/opt/share/R</code> named <code>3.6.3-v2</code>, which does not have the modulefile, since the same version <code>3.6.3</code> is already used. But there are still differences between these two &ldquo;same&rdquo; versions, <code>3.6.3-v2</code> supports figures, such as &ldquo;jpeg&rdquo;, &ldquo;png&rdquo;, &ldquo;tiff&rdquo; and &ldquo;cairo&rdquo;, while <code>3.6.3</code> not,</p>
<div class="highlight"><pre><span></span><code><span class="o">(</span><span class="m">3</span>.6.3<span class="o">)</span><span class="w"> </span>&gt;<span class="w"> </span>capabilities<span class="o">()</span>
<span class="w">       </span>jpeg<span class="w">         </span>png<span class="w">        </span>tiff<span class="w">       </span>tcltk<span class="w">         </span>X11<span class="w">        </span>aqua
<span class="w">      </span>FALSE<span class="w">       </span>FALSE<span class="w">       </span>FALSE<span class="w">        </span>TRUE<span class="w">       </span>FALSE<span class="w">       </span>FALSE
<span class="w">   </span>http/ftp<span class="w">     </span>sockets<span class="w">      </span>libxml<span class="w">        </span>fifo<span class="w">      </span>cledit<span class="w">       </span>iconv
<span class="w">       </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE
<span class="w">        </span>NLS<span class="w">     </span>profmem<span class="w">       </span>cairo<span class="w">         </span>ICU<span class="w"> </span>long.double<span class="w">     </span>libcurl
<span class="w">       </span>TRUE<span class="w">       </span>FALSE<span class="w">       </span>FALSE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE

<span class="o">(</span><span class="m">3</span>.6.3-v2<span class="o">)</span><span class="w"> </span>&gt;<span class="w"> </span>capabilities<span class="o">()</span>
<span class="w">       </span>jpeg<span class="w">         </span>png<span class="w">        </span>tiff<span class="w">       </span>tcltk<span class="w">         </span>X11<span class="w">        </span>aqua
<span class="w">       </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">       </span>FALSE<span class="w">       </span>FALSE
<span class="w">   </span>http/ftp<span class="w">     </span>sockets<span class="w">      </span>libxml<span class="w">        </span>fifo<span class="w">      </span>cledit<span class="w">       </span>iconv
<span class="w">       </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE
<span class="w">        </span>NLS<span class="w">     </span>profmem<span class="w">       </span>cairo<span class="w">         </span>ICU<span class="w"> </span>long.double<span class="w">     </span>libcurl
<span class="w">       </span>TRUE<span class="w">       </span>FALSE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE<span class="w">        </span>TRUE
</code></pre></div>
<p>To use <code>3.6.3-v2</code>, we can create our custom modulefile (<a href="https://www.sc.fsu.edu/computing/tech-docs/1177-linux-modules">ref</a>),</p>
<div class="highlight"><pre><span></span><code><span class="c1"># step 1: create a folder in your home directory</span>
~<span class="w"> </span>$<span class="w"> </span>mkdir<span class="w"> </span>modules
<span class="c1"># step 2: preappend your module path to the ~/.bashrc file</span>
~<span class="w"> </span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export MODULEPATH=</span><span class="si">${</span><span class="nv">MODULEPATH</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/modules&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="c1"># step 3: copy the existing modulefile as a template</span>
<span class="c1"># here I skip the directory, just use name `R3.6`, which can also differ from the existing `R/3.6`</span>
~<span class="w"> </span>$<span class="w"> </span>cp<span class="w"> </span>/usr/share/Modules/modulefiles/R/3.6<span class="w"> </span>modules/R3.6
<span class="c1"># step 4: modify the path to the software (`modroot`) as follows</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">/usr/share/Modules/modulefiles/R/3.6</label><label for="__tabbed_4_2">~/modules/R3.6</label><label for="__tabbed_4_3">diff -u</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">#%Module1.0#####################################################################</span>
<span class="c1">##</span>
proc<span class="w"> </span>ModulesHelp<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">{</span>
<span class="w"> </span>global<span class="w"> </span>version<span class="w"> </span>modroot

puts<span class="w"> </span>stderr<span class="w"> </span><span class="s2">&quot;R/3.6.3 - sets the Environment for</span>
<span class="s2">         R scripts v3.6.3 (gcc verion)</span>

<span class="s2">Use &#39;module whatis [module-info name]&#39; for more information&quot;</span>
<span class="o">}</span>

module-whatis<span class="w"> </span><span class="s2">&quot;The R Project for Statistical Computing</span>
<span class="s2">R is a free software environment for statistical computing and graphics.</span>

<span class="s2">Here is the available versions:</span>
<span class="s2">        R/3.6.3&quot;</span>


<span class="nb">set</span><span class="w">     </span>version<span class="w">         </span><span class="m">3</span>.6.3
<span class="nb">set</span><span class="w">     </span>app<span class="w">             </span>R
<span class="nb">set</span><span class="w">     </span>modroot<span class="w">         </span>/opt/share/<span class="nv">$app</span>/<span class="nv">$version</span>

module<span class="w"> </span>load<span class="w"> </span>pcre2

conflict<span class="w"> </span>R

setenv<span class="w"> </span>R_HOME<span class="w"> </span><span class="nv">$modroot</span>/lib64/R

prepend-path<span class="w"> </span>PATH<span class="w"> </span><span class="nv">$modroot</span>/bin
prepend-path<span class="w"> </span>LD_LIBRARY_PATH<span class="w"> </span><span class="nv">$modroot</span>/lib
prepend-path<span class="w"> </span>INCLUDE<span class="w"> </span><span class="nv">$modroot</span>/include
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">#%Module1.0#####################################################################</span>
<span class="c1">##</span>
proc<span class="w"> </span>ModulesHelp<span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">{</span>
<span class="w"> </span>global<span class="w"> </span>version<span class="w"> </span>modroot

puts<span class="w"> </span>stderr<span class="w"> </span><span class="s2">&quot;R/3.6.3 - sets the Environment for</span>
<span class="s2">         R scripts v3.6.3 (gcc verion)</span>

<span class="s2">Use &#39;module whatis [module-info name]&#39; for more information&quot;</span>
<span class="o">}</span>

module-whatis<span class="w"> </span><span class="s2">&quot;The R Project for Statistical Computing</span>
<span class="s2">R is a free software environment for statistical computing and graphics.</span>

<span class="s2">Here is the available versions:</span>
<span class="s2">        R/3.6.3&quot;</span>


<span class="nb">set</span><span class="w">     </span>version<span class="w">         </span><span class="m">3</span>.6.3
<span class="nb">set</span><span class="w">     </span>app<span class="w">             </span>R
<span class="nb">set</span><span class="w">     </span>modroot<span class="w">         </span>/opt/share/<span class="nv">$app</span>/<span class="si">${</span><span class="nv">version</span><span class="si">}</span>-v2

module<span class="w"> </span>load<span class="w"> </span>pcre2
module<span class="w"> </span>load<span class="w"> </span>intel
conflict<span class="w"> </span>R

setenv<span class="w"> </span>R_HOME<span class="w"> </span><span class="nv">$modroot</span>/lib64/R

prepend-path<span class="w"> </span>PATH<span class="w"> </span><span class="nv">$modroot</span>/bin
prepend-path<span class="w"> </span>LD_LIBRARY_PATH<span class="w"> </span><span class="nv">$modroot</span>/lib
prepend-path<span class="w"> </span>INCLUDE<span class="w"> </span><span class="nv">$modroot</span>/include
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gu">@@ -18,10 +18,10 @@</span>

<span class="w"> </span>set     version         3.6.3
<span class="w"> </span>set     app             R
<span class="gd">-set     modroot         /opt/share/$app/$version</span>
<span class="gi">+set     modroot         /opt/share/$app/${version}-v2</span>

<span class="w"> </span>module load pcre2
<span class="gd">-</span>
<span class="gi">+module load intel</span>
<span class="w"> </span>conflict R
</code></pre></div>
</div>
</div>
</div>
<p>Note that <code>module load intel</code> is also added, otherwise it will throws,</p>
<div class="highlight"><pre><span></span><code>/opt/share/R/3.6.3-v2/lib64/R/bin/exec/R:<span class="w"> </span>error<span class="w"> </span><span class="k">while</span><span class="w"> </span>loading<span class="w"> </span>shared<span class="w"> </span>libraries:<span class="w"> </span>libiomp5.so:<span class="w"> </span>cannot<span class="w"> </span>open<span class="w"> </span>shared<span class="w"> </span>object<span class="w"> </span>file:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</code></pre></div>
<p>since <code>libiomp5</code> is for <code>openmp</code> (<a href="https://stackoverflow.com/a/28254656">ref</a>).</p>
<p>Now, you can use <code>3.6.3-v2</code> like other modules,</p>
<div class="highlight"><pre><span></span><code><span class="c1"># load `3.6.3-v2`</span>
$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>R3.6
<span class="c1"># unload `3.6.3-v2`</span>
$<span class="w"> </span>module<span class="w"> </span>unload<span class="w"> </span>R3.6
<span class="c1"># load original `3.6.3`</span>
$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>R/3.6
</code></pre></div>
<h2 id="gpu-usage">GPU Usage<a class="headerlink" href="#gpu-usage" title="Permanent link">&para;</a></h2>
<p>Be cautious about the compatible versions between the deep learning framework (e.g., tensorflow), CUDA, and also the (CUDA) <strong>driver</strong> version of the node.</p>
<p>The driver version of the node is fixed, but fortunately it is downward compatible, i.e., a higher driver version also supports a lower CUDA version. We can check the driver version by</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>nvidia-smi<span class="w"> </span>
Sat<span class="w"> </span>Jun<span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">10</span>:32:03<span class="w"> </span><span class="m">2021</span><span class="w">       </span>
+-----------------------------------------------------------------------------+
<span class="p">|</span><span class="w"> </span>NVIDIA-SMI<span class="w"> </span><span class="m">450</span>.36.06<span class="w">    </span>Driver<span class="w"> </span>Version:<span class="w"> </span><span class="m">450</span>.36.06<span class="w">    </span>CUDA<span class="w"> </span>Version:<span class="w"> </span><span class="m">11</span>.0<span class="w">     </span><span class="p">|</span>
...
</code></pre></div>
<p>which implies that the highest supported CUDA version is 11.0.</p>
<p>The available CUDA versions can be found as follows</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>module<span class="w"> </span>avail<span class="w"> </span>cuda
--------------<span class="w"> </span>/usr/share/Modules/modulefiles<span class="w"> </span>---------------
cuda/10.1<span class="w">          </span>cuda/10.2<span class="w">          </span>cuda/11.0<span class="w">          </span>cuda/11.3<span class="o">(</span>default<span class="o">)</span><span class="w"> </span>cuda/9.2
</code></pre></div>
<p>For the above node whose highest supported CUDA version is 11.0, the latest <code>cuda/11.3</code> would be incompatible, but others are all OK.</p>
<p>Now you can pick the proper tensorflow version according to the supported CUDA versions. Here is an <a href="https://www.tensorflow.org/install/source#linux">official configuration table</a>, which lists the compatible versions between tensorflow, python, CUDA, together with cuDNN.</p>
<p>Finally, you can validate if the GPU is correctly supported by running</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span> <span class="n">python</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="c1"># 1.x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tf</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">is_gpu_available</span><span class="p">()</span>
<span class="c1"># 2.x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tf</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">list_physical_devices</span><span class="p">(</span><span class="s1">&#39;GPU&#39;</span><span class="p">)</span>
</code></pre></div>
<p>What if you want to use the version that does not installed on the cluster, say <code>cuda/10.0</code>? We can install a local cuda and creat a <a href="#custom-module">custom module</a> to call it. </p>
<p>Following the instruction: <a href="https://stackoverflow.com/questions/39379792/install-cuda-without-root">Install Cuda without root</a></p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>wget<span class="w"> </span>https://developer.nvidia.com/compute/cuda/10.0/Prod/local_installers/cuda_10.0.130_410.48_linux
$<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>cuda_10.0.130_410.48_linux
$<span class="w"> </span>./cuda_10.0.130_410.48_linux
</code></pre></div>
<p>then download <code>cuDNN</code>, but it requires to login. After extraction, copy the <code>include</code> and <code>lib</code> to the CUDA installation folder.</p>
<p>Next, create the custom module file, and finally I can use </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cuda<span class="w"> </span>load<span class="w"> </span>cuda10.0
</code></pre></div>
<p>to use the local cuda.</p>
<h2 id="inherited-environment">Inherited Environment<a class="headerlink" href="#inherited-environment" title="Permanent link">&para;</a></h2>
<p>By default, <code>sbatch</code> will inherit the environment variables, so</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>R/3.6
$<span class="w"> </span>sbatch<span class="w"> </span>-p<span class="w"> </span>stat<span class="w"> </span>-q<span class="w"> </span>stat<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">&gt; #!/bin/sh</span>
<span class="s">&gt; echo $PATH</span>
<span class="s">&gt; which R</span>
<span class="s">&gt; EOF</span>
Submitted<span class="w"> </span>batch<span class="w"> </span>job<span class="w"> </span><span class="m">319113</span>
$<span class="w"> </span>cat<span class="w"> </span>slurm-319113.out<span class="w"> </span>
/opt/share/R/3.6.3/bin:...
/opt/share/R/3.6.3/bin/R
</code></pre></div>
<p>we can disable the inheriting behavior via </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sbatch<span class="w"> </span>-p<span class="w"> </span>stat<span class="w"> </span>-q<span class="w"> </span>stat<span class="w"> </span>--export<span class="o">=</span>NONE<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">&gt; #!/bin/sh</span>
<span class="s">&gt; echo $PATH</span>
<span class="s">&gt; which R</span>
<span class="s">&gt; EOF</span>
Submitted<span class="w"> </span>batch<span class="w"> </span>job<span class="w"> </span><span class="m">319110</span>
$<span class="w"> </span>cat<span class="w"> </span>slurm-319110.out<span class="w"> </span>
/opt/share/R/3.6.3/bin:
which:<span class="w"> </span>no<span class="w"> </span>R<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">(</span>...
</code></pre></div>
<p>But note that <code>$PATH</code> still has the path to <code>R/3.6</code>, the explanation would be that the substitution has been executed before submitting.</p>
<p>The detailed explanation of <code>--export</code> can be found in <code>man sbatch</code></p>
<div class="highlight"><pre><span></span><code><span class="w">       </span>--export<span class="o">=</span>&lt;<span class="o">[</span>ALL,<span class="o">]</span>environment<span class="w"> </span>variables<span class="p">|</span>ALL<span class="p">|</span>NONE&gt;
<span class="w">              </span>Identify<span class="w">  </span>which<span class="w"> </span>environment<span class="w"> </span>variables<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>submission<span class="w"> </span>environment<span class="w"> </span>are<span class="w"> </span>propagated<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>launched<span class="w"> </span>applica‐
<span class="w">              </span>tion.<span class="w"> </span>Note<span class="w"> </span>that<span class="w"> </span>SLURM_*<span class="w"> </span>variables<span class="w"> </span>are<span class="w"> </span>always<span class="w"> </span>propagated.

<span class="w">              </span>--export<span class="o">=</span>ALL
<span class="w">                        </span>Default<span class="w"> </span>mode<span class="w"> </span><span class="k">if</span><span class="w"> </span>--export<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>specified.<span class="w"> </span>All<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>users<span class="w"> </span>environment<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>loaded<span class="w"> </span><span class="o">(</span>either<span class="w"> </span>from
<span class="w">                        </span>callers<span class="w"> </span>environment<span class="w"> </span>or<span class="w"> </span>clean<span class="w"> </span>environment<span class="w"> </span><span class="k">if</span><span class="w"> </span>--get-user-env<span class="w"> </span>is<span class="w"> </span>specified<span class="o">)</span>.

<span class="w">              </span>--export<span class="o">=</span>NONE
<span class="w">                        </span>Only<span class="w">  </span>SLURM_*<span class="w">  </span>variables<span class="w">  </span>from<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>environment<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>defined.<span class="w"> </span>User<span class="w"> </span>must<span class="w"> </span>use<span class="w"> </span>absolute<span class="w"> </span>path<span class="w"> </span>to
<span class="w">                        </span>the<span class="w"> </span>binary<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>executed<span class="w"> </span>that<span class="w"> </span>will<span class="w"> </span>define<span class="w"> </span>the<span class="w"> </span>environment.<span class="w">  </span>User<span class="w"> </span>can<span class="w"> </span>not<span class="w"> </span>specify<span class="w"> </span>explicit<span class="w"> </span>environ‐
<span class="w">                        </span>ment<span class="w"> </span>variables<span class="w"> </span>with<span class="w"> </span>NONE.<span class="w">  </span>--get-user-env<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>ignored.
<span class="w">                        </span>This<span class="w">  </span>option<span class="w">  </span>is<span class="w"> </span>particularly<span class="w"> </span>important<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>that<span class="w"> </span>are<span class="w"> </span>submitted<span class="w"> </span>on<span class="w"> </span>one<span class="w"> </span>cluster<span class="w"> </span>and<span class="w"> </span>execute<span class="w"> </span>on<span class="w"> </span>a
<span class="w">                        </span>different<span class="w"> </span>cluster<span class="w"> </span><span class="o">(</span>e.g.<span class="w"> </span>with<span class="w"> </span>different<span class="w"> </span>paths<span class="o">)</span>.<span class="w">  </span>To<span class="w"> </span>avoid<span class="w"> </span>steps<span class="w"> </span>inheriting<span class="w"> </span>environment<span class="w">  </span><span class="nb">export</span><span class="w">  </span>set‐
<span class="w">                        </span>tings<span class="w">  </span><span class="o">(</span>e.g.<span class="w">  </span>NONE<span class="o">)</span><span class="w"> </span>from<span class="w"> </span>sbatch<span class="w"> </span>command,<span class="w"> </span>the<span class="w"> </span>environment<span class="w"> </span>variable<span class="w"> </span>SLURM_EXPORT_ENV<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span><span class="nb">set</span><span class="w"> </span>to
<span class="w">                        </span>ALL<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>job<span class="w"> </span>script.
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">February 5, 2023</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 21, 2018</span>
      
    
  </small>
</div>





  <h2 id="__comments">Comments</h2>
  <script src="https://giscus.app/client.js"
        data-repo="szcf-weiya/techNotes"
        data-repo-id="MDEwOlJlcG9zaXRvcnk4NDA2NDk0Mw=="
        data-category="Announcements"
        data-category-id="DIC_kwDOBQK6r84CSDX_"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
    </script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017-2023 weiya
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/szcf-weiya" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://esl.hohoweiya.xyz" target="_blank" rel="noopener" title="esl.hohoweiya.xyz" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hohoweiya.xyz" target="_blank" rel="noopener" title="hohoweiya.xyz" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40h-16c-1.1 0-2.2 0-3.3-.1-1.4.1-2.8.1-4.2.1H392c-22.1 0-40-17.9-40-40v-88c0-17.7-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32v88c0 22.1-17.9 40-40 40h-55.9c-1.5 0-3-.1-4.5-.2-1.2.1-2.4.2-3.6.2h-16c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9.1-2.8v-69.6H32c-18 0-32-14-32-32.1 0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7l255.4 224.5c8 7 12 15 11 24z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://stats.hohoweiya.xyz" target="_blank" rel="noopener" title="stats.hohoweiya.xyz" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M168 80c-13.3 0-24 10.7-24 24v304c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 432c13.3 0 24-10.7 24-24V104c0-39.8 32.2-72 72-72h272c39.8 0 72 32.2 72 72v304c0 39.8-32.2 72-72 72H72c-39.8 0-72-32.2-72-72V112c0-13.3 10.7-24 24-24s24 10.7 24 24v296c0 13.3 10.7 24 24 24zm104-296c0-13.3 10.7-24 24-24h208c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24H200c-13.3 0-24-10.7-24-24v-80zm24 136h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24zm144 0h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24zm-144 80h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24zm144 0h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://blog.csdn.net/szcf715" target="_blank" rel="noopener" title="blog.csdn.net" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 80c-8.8 0-16 7.2-16 16v320c0 8.8 7.2 16 16 16h224v-80c0-17.7 14.3-32 32-32h80V96c0-8.8-7.2-16-16-16H64zm224 400H64c-35.3 0-64-28.7-64-64V96c0-35.3 28.7-64 64-64h320c35.3 0 64 28.7 64 64v229.5c0 17-6.7 33.3-18.7 45.3l-90.5 90.5c-12 12-28.3 18.7-45.3 18.7H288z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:szcfweiya@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16v22.1l172.5 141.6c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16H64zM48 212.2V384c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b78d2936.min.js"></script>
      
        <script src="../../javascripts/baiduzhanzhang.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>